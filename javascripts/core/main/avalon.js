!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.avalon=factory():root.avalon=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){var avalon=__webpack_require__(1);__webpack_require__(8),__webpack_require__(15),__webpack_require__(21),__webpack_require__(43),__webpack_require__(72),avalon.onComponentDispose=__webpack_require__(79),__webpack_require__(81),module.exports=avalon},function(module,exports,__webpack_require__){__webpack_require__(2),__webpack_require__(3),__webpack_require__(5),__webpack_require__(6),module.exports=__webpack_require__(7)},function(module,exports){function iterator(vars,body,ret){var fun="for(var "+vars+"i=0,n = this.length; i < n; i++){"+body.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+ret;return Function("fn,scope",fun)}var ohasOwn=Object.prototype.hasOwnProperty;if(!"司徒正美".trim){var rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(rtrim,"")}}var hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),hasProtoEnumBug=function(){}.propertyIsEnumerable("prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;Object.keys||(Object.keys=function(object){var theKeys=[],skipProto=hasProtoEnumBug&&"function"==typeof object;if("string"==typeof object||object&&object.callee)for(var i=0;i<object.length;++i)theKeys.push(String(i));else for(var name in object)skipProto&&"prototype"===name||!ohasOwn.call(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var ctor=object.constructor,skipConstructor=ctor&&ctor.prototype===object,j=0;j<dontEnumsLength;j++){var dontEnum=dontEnums[j];skipConstructor&&"constructor"===dontEnum||!ohasOwn.call(object,dontEnum)||theKeys.push(dontEnum)}return theKeys}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Array.isArray.bind||(Function.prototype.bind=function(scope){if(arguments.length<2&&void 0===scope)return this;var fn=this,argv=arguments;return function(){var i,args=[];for(i=1;i<argv.length;i++)args.push(argv[i]);for(i=0;i<arguments.length;i++)args.push(arguments[i]);return fn.apply(scope,args)}});var _slice=Array.prototype.slice;try{_slice.call(document.documentElement)}catch(e){Array.prototype.slice=function(begin,end){if(end="undefined"!=typeof end?end:this.length,Array.isArray(this))return _slice.call(this,begin,end);var i,size,cloned=[],len=this.length,start=begin||0;start=start>=0?start:len+start;var upTo=end?end:len;if(end<0&&(upTo=len+end),size=upTo-start,size>0)if(cloned=new Array(size),this.charAt)for(i=0;i<size;i++)cloned[i]=this.charAt(start+i);else for(i=0;i<size;i++)cloned[i]=this[start+i];return cloned}}var ap=Array.prototype;if(!/\[native code\]/.test(ap.map)){var shim={indexOf:function(item,index){var n=this.length,i=~~index;for(i<0&&(i+=n);i<n;i++)if(this[i]===item)return i;return-1},lastIndexOf:function(item,index){var n=this.length,i=null==index?n-1:index;for(i<0&&(i=Math.max(0,n+i));i>=0;i--)if(this[i]===item)return i;return-1},forEach:iterator("","_",""),filter:iterator("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:iterator("r=[],","r[i]=_","return r"),some:iterator("","if(_)return true","return false"),every:iterator("","if(!_)return false","return true")};for(var i in shim)ap[i]=shim[i]}module.exports={}},function(module,exports,__webpack_require__){var avalon=__webpack_require__(4),window=Function(" return this")()||this,browser={window:window,document:{createElement:function(){return{}},createElementNS:function(){return{}},contains:Boolean},root:{outerHTML:"x"},msie:NaN,modern:!0,avalonDiv:{},avalonFragment:null};if(window.avalon=avalon,window.location&&window.navigator&&window.window){var doc=window.document;browser.browser=!0,browser.document=doc,browser.modern=window.dispatchEvent,browser.root=doc.documentElement,browser.avalonDiv=doc.createElement("div"),browser.avalonFragment=doc.createDocumentFragment(),window.VBArray&&(browser.msie=doc.documentMode||(window.XMLHttpRequest?7:6))}avalon.shadowCopy(avalon,browser)},function(module,exports){function avalon(el){return new avalon.init(el)}avalon.init=function(el){this[0]=this.element=el},avalon.fn=avalon.prototype=avalon.init.prototype,avalon.shadowCopy=function(destination,source){for(var property in source)destination[property]=source[property];return destination};var rword=/[^, ]+/g,hasConsole="object"==typeof console;avalon.shadowCopy(avalon,{noop:function(){},rword:rword,inspect:{}.toString,ohasOwn:{}.hasOwnProperty,log:function(){hasConsole&&avalon.config.debug&&Function.apply.call(console.log,console,arguments)},warn:function(){if(hasConsole&&avalon.config.debug){var method=console.warn||console.log;Function.apply.call(method,console,arguments)}},error:function(str,e){throw(e||Error)(str)},oneObject:function(array,val){"string"==typeof array&&(array=array.match(rword)||[]);for(var result={},value=void 0!==val?val:1,i=0,n=array.length;i<n;i++)result[array[i]]=value;return result}}),module.exports=avalon},function(module,exports,__webpack_require__){function isWindowCompact(obj){return!!obj&&(obj==obj.document&&obj.document!=obj)}function isWindowModern(obj){return rwindow.test(tos.call(obj))}function isPlainObjectCompact(obj,key){if(!obj||"object"!==avalon.type(obj)||obj.nodeType||avalon.isWindow(obj))return!1;try{if(obj.constructor&&!ohasOwn.call(obj,"constructor")&&!ohasOwn.call(obj.constructor.prototype||{},"isPrototypeOf"))return!1}catch(e){return!1}if(enumerateBUG)for(key in obj)return ohasOwn.call(obj,key);for(key in obj);return void 0===key||ohasOwn.call(obj,key)}function isPlainObjectModern(obj){return"[object Object]"===tos.call(obj)&&Object.getPrototypeOf(obj)===Object.prototype}function isArrayLike(obj){if(!obj)return!1;var n=obj.length;if(n===n>>>0){var type=tos.call(obj).slice(8,-1);if(rarraylike.test(type))return!1;if("Array"===type)return!0;try{return{}.propertyIsEnumerable.call(obj,"length")!==!1||rfunction.test(obj.item||obj.callee)}catch(e){return!obj.window}}return!1}var avalon=__webpack_require__(4);avalon.quote="undefined"!=typeof JSON?JSON.stringify:new function(){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},leadingZeroes="000000",toPaddedString=function(width,value){return(leadingZeroes+(value||0)).slice(-width)},unicodePrefix="\\u00",escapeChar=function(character){var charCode=character.charCodeAt(0),escaped=Escapes[charCode];return escaped?escaped:unicodePrefix+toPaddedString(2,charCode.toString(16))},reEscape=/[\x00-\x1f\x22\x5c]/g;return function(value){return reEscape.lastIndex=0,'"'+(reEscape.test(value)?String(value).replace(reEscape,escapeChar):value)+'"'}};var tos=avalon.inspect,class2type={};"Boolean Number String Function Array Date RegExp Object Error".replace(avalon.rword,function(name){class2type["[object "+name+"]"]=name.toLowerCase()}),avalon.type=function(obj){return null==obj?String(obj):"object"==typeof obj||"function"==typeof obj?class2type[tos.call(obj)]||"object":typeof obj};var rfunction=/^\s*\bfunction\b/;avalon.isFunction="object"==typeof alert?function(fn){try{return rfunction.test(fn+"")}catch(e){return!1}}:function(fn){return"[object Function]"===tos.call(fn)};var rwindow=/^\[object (?:Window|DOMWindow|global)\]$/;avalon.isWindow=isWindowModern(avalon.window)?isWindowModern:isWindowCompact;var enu,enumerateBUG;for(enu in avalon({}))break;var ohasOwn=avalon.ohasOwn;enumerateBUG="0"!==enu,avalon.isPlainObject=/\[native code\]/.test(Object.getPrototypeOf)?isPlainObjectModern:isPlainObjectCompact,avalon.mix=avalon.fn.mix=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i++),"object"==typeof target||avalon.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options){try{src=target[name],copy=options[name]}catch(e){continue}target!==copy&&(deep&&copy&&(avalon.isPlainObject(copy)||(copyIsArray=Array.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&Array.isArray(src)?src:[]):clone=src&&avalon.isPlainObject(src)?src:{},target[name]=avalon.mix(deep,clone,copy)):void 0!==copy&&(target[name]=copy))}return target};var rarraylike=/(Array|List|Collection|Map|Arguments)\]$/;avalon.each=function(obj,fn){if(obj){var i=0;if(isArrayLike(obj))for(var n=obj.length;i<n&&fn(i,obj[i])!==!1;i++);else for(i in obj)if(obj.hasOwnProperty(i)&&fn(i,obj[i])===!1)break}},module.exports={avalon:avalon,isArrayLike:isArrayLike}},function(module,exports,__webpack_require__){function defaultParse(cur,pre,binding){cur[binding.name]=avalon.parseExpr(binding)}var avalon=__webpack_require__(4),cssHooks={},rhyphen=/([a-z\d])([A-Z]+)/g,rcamelize=/[-_][^-_]/g,rhashcode=/\d\.\d{4}/,rescape=/[-.*+?^${}()|[\]\/\\]/g,_slice=[].slice;avalon.shadowCopy(avalon,{caches:{},vmodels:{},filters:{},components:{},directives:{},eventHooks:{},eventListeners:{},validators:{},scopes:{},cssHooks:cssHooks,parsers:{number:function(a){return""===a?"":/\d\.$/.test(a)?a:parseFloat(a)||0},string:function(a){return null===a||void 0===a?"":a+""},boolean:function(a){return""===a?a:"true"===a||"1"==a}},version:"2.113",slice:function(nodes,start,end){return _slice.call(nodes,start,end)},css:function(node,name,value,fn){if(node instanceof avalon&&(node=node[0]),1===node.nodeType){var prop=avalon.camelize(name);if(name=avalon.cssName(prop)||prop,void 0===value||"boolean"==typeof value){fn=cssHooks[prop+":get"]||cssHooks["@:get"],"background"===name&&(name="backgroundColor");var val=fn(node,name);return value===!0?parseFloat(val)||0:val}if(""===value)node.style[name]="";else{if(null==value||value!==value)return;isFinite(value)&&!avalon.cssNumber[prop]&&(value+="px"),fn=cssHooks[prop+":set"]||cssHooks["@:set"],fn(node,name,value)}}},directive:function(name,definition){return definition.parse=definition.parse||defaultParse,this.directives[name]=definition},isObject:function(a){return null!==a&&"object"==typeof a},range:function(start,end,step){step||(step=1),null==end&&(end=start||0,start=0);for(var index=-1,length=Math.max(0,Math.ceil((end-start)/step)),result=new Array(length);++index<length;)result[index]=start,start+=step;return result},hyphen:function(target){return target.replace(rhyphen,"$1-$2").toLowerCase()},camelize:function(target){return!target||target.indexOf("-")<0&&target.indexOf("_")<0?target:target.replace(rcamelize,function(match){return match.charAt(1).toUpperCase()})},makeHashCode:function(prefix){return prefix=prefix||"avalon",String(Math.random()+Math.random()).replace(rhashcode,prefix)},escapeRegExp:function(target){return(target+"").replace(rescape,"\\$&")},Array:{merge:function(target,other){target.push.apply(target,other)},ensure:function(target,item){if(target.indexOf(item)===-1)return target.push(item)},removeAt:function(target,index){return!!target.splice(index,1).length},remove:function(target,item){var index=target.indexOf(item);return!!~index&&avalon.Array.removeAt(target,index)}}}),"undefined"!=typeof performance&&performance.now&&(avalon.makeHashCode=function(prefix){return prefix=prefix||"avalon",(prefix+performance.now()).replace(".","")});var UUID=1;module.exports={avalon:avalon,getLongID:function(fn){return fn.uuid||(fn.uuid=avalon.makeHashCode("e"))},getShortID:function(fn){return fn.uuid||(fn.uuid="_"+ ++UUID)}}},function(module,exports,__webpack_require__){function kernel(settings){for(var p in settings)if(avalon.ohasOwn.call(settings,p)){var val=settings[p];"function"==typeof kernel.plugins[p]?kernel.plugins[p](val):"object"==typeof kernel[p]?avalon.shadowCopy(kernel[p],val):kernel[p]=val}return this}var avalon=__webpack_require__(4);avalon.config=kernel;var plugins={interpolate:function(array){var openTag=array[0],closeTag=array[1];if(openTag===closeTag)throw new SyntaxError("openTag!==closeTag");var test=openTag+"test"+closeTag,div=avalon.avalonDiv;if(div.innerHTML=test,div.innerHTML!==test&&div.innerHTML.indexOf("&lt;")>-1)throw new SyntaxError("此定界符不合法");div.innerHTML="",kernel.openTag=openTag,kernel.closeTag=closeTag;var o=avalon.escapeRegExp(openTag),c=avalon.escapeRegExp(closeTag);kernel.rexpr=new RegExp(o+"([\\s\\S]*)"+c)}};kernel.plugins=plugins,avalon.config({interpolate:["{{","}}"],debug:!0}),module.exports=avalon},function(module,exports,__webpack_require__){function K(a){return a}var avalon=__webpack_require__(4),number=__webpack_require__(9),sanitize=__webpack_require__(10),date=__webpack_require__(11),arrayFilters=__webpack_require__(12),eventFilters=__webpack_require__(13),filters=avalon.filters,escape=avalon.escapeHtml=__webpack_require__(14);avalon.__format__=function(name){var fn=filters[name];return fn?fn.get?fn.get:fn:K},avalon.mix(filters,{uppercase:function(str){return String(str).toUpperCase()},lowercase:function(str){return String(str).toLowerCase()},truncate:function(str,length,truncation){return length=length||30,truncation="string"==typeof truncation?truncation:"...",str.length>length?str.slice(0,length-truncation.length)+truncation:String(str)},camelize:avalon.camelize,date:date,escape:escape,sanitize:sanitize,number:number,currency:function(amount,symbol,fractionSize){return(symbol||"￥")+number(amount,isFinite(fractionSize)?fractionSize:2)}},arrayFilters,eventFilters),module.exports=avalon},function(module,exports){function number(number,decimals,point,thousands){number=(number+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+number)?+number:0,prec=isFinite(+decimals)?Math.abs(decimals):3,sep=thousands||",",dec=point||".",s="",toFixedFix=function(n,prec){var k=Math.pow(10,prec);return""+(Math.round(n*k)/k).toFixed(prec)};return s=(prec?toFixedFix(n,prec):""+Math.round(n)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep)),(s[1]||"").length<prec&&(s[1]=s[1]||"",s[1]+=new Array(prec-s[1].length+1).join("0")),s.join(dec)}module.exports=number},function(module,exports){var rscripts=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,ron=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,ropen=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,rsanitize={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi};module.exports=function(str){return str.replace(rscripts,"").replace(ropen,function(a,b){var match=a.toLowerCase().match(/<(\w+)\s/);if(match){var reg=rsanitize[match[1]];reg&&(a=a.replace(reg,function(s,name,value){var quote=value.charAt(0);return name+"="+quote+"javascript:void(0)"+quote}))}return a.replace(ron," ").replace(/\s+/g," ")})}},function(module,exports){function toInt(str){return parseInt(str,10)||0}function padNumber(num,digits,trim){var neg="";for(num<0&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&offset===-12&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=(shortForm?"SHORT"+name:name).toUpperCase();return formats[get][value]}}function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset(),paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function dateFilter(date,format){var fn,match,locate=dateFilter.locate,text="",parts=[];if(format=format||"mediumDate",format=locate[format]||format,"string"==typeof date)if(/^\d+$/.test(date))date=toInt(date);else if(raspnetjson.test(date))date=+RegExp.$1;else{var trimDate=date.trim(),dateArray=[0,0,0,0,0,0,0],oDate=new Date(0);trimDate=trimDate.replace(/^(\d+)\D(\d+)\D(\d+)/,function(_,a,b,c){var array=4===c.length?[c,a,b]:[a,b,c];return dateArray[0]=toInt(array[0]),dateArray[1]=toInt(array[1])-1,dateArray[2]=toInt(array[2]),""});var dateSetter=oDate.setFullYear,timeSetter=oDate.setHours;trimDate=trimDate.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(_,a,b,c,d){return dateArray[3]=toInt(a),dateArray[4]=toInt(b),dateArray[5]=toInt(c),d&&(dateArray[6]=Math.round(1e3*parseFloat("0."+d))),""});var tzHour=0,tzMin=0;trimDate=trimDate.replace(/Z|([+-])(\d\d):?(\d\d)/,function(z,symbol,c,d){return dateSetter=oDate.setUTCFullYear,timeSetter=oDate.setUTCHours,symbol&&(tzHour=toInt(symbol+c),tzMin=toInt(symbol+d)),""}),dateArray[3]-=tzHour,dateArray[4]-=tzMin,dateSetter.apply(oDate,dateArray.slice(0,3)),timeSetter.apply(oDate,dateArray.slice(3)),date=oDate}if("number"==typeof date&&(date=new Date(date)),"[object Date]"===tos.call(date)){for(;format;)match=rdateFormat.exec(format),match?(parts=parts.concat(match.slice(1)),format=parts.pop()):(parts.push(format),format=null);return parts.forEach(function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,locate):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}var tos=Object.prototype.toString,DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter},rdateFormat=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,raspnetjson=/^\/Date\((\d+)\)\/$/,locate={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss",short:"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};locate.SHORTMONTH=locate.MONTH,dateFilter.locate=locate,module.exports=dateFilter},function(module,exports,__webpack_require__){function orderBy(array,criteria,reverse){var type=avalon.type(array);if("array"!==type&&"object"!==type)throw"orderBy只能处理对象或数组";var order=reverse&&reverse<0?-1:1;if("string"==typeof criteria){var key=criteria;criteria=function(a){return a&&a[key]}}array=convertArray(array),array.forEach(function(el){el.order=criteria(el.value,el.key)}),array.sort(function(left,right){var a=left.order,b=right.order;return Number.isNaN(a)&&Number.isNaN(b)?0:a===b?0:a>b?order:-order});var isArray="array"===type,target=isArray?[]:{};return recovery(target,array,function(el){isArray?target.push(el.value):target[el.key]=el.value})}function filterBy(array,search){var type=avalon.type(array);if("array"!==type&&"object"!==type)throw"filterBy只能处理对象或数组";var args=avalon.slice(arguments,2),stype=avalon.type(search);if("function"===stype)var criteria=search;else{if("string"!==stype&&"number"!==stype)return array;if(""===search)return array;var reg=new RegExp(avalon.escapeRegExp(search),"i");criteria=function(el){return reg.test(el)}}array=convertArray(array).filter(function(el,i){return!!criteria.apply(el,[el.value,i].concat(args))});var isArray="array"===type,target=isArray?[]:{};return recovery(target,array,function(el){isArray?target.push(el.value):target[el.key]=el.value})}function selectBy(data,array,defaults){if(avalon.isObject(data)&&!Array.isArray(data)){var target=[];return recovery(target,array,function(name){target.push(data.hasOwnProperty(name)?data[name]:defaults?defaults[name]:"")})}return data}function limitBy(input,limit,begin){var type=avalon.type(input);if("array"!==type&&"object"!==type)throw"limitBy只能处理对象或数组";if("number"!=typeof limit)return input;if(Number.isNaN(limit))return input;"object"===type&&(input=convertArray(input));var n=input.length;limit=Math.min(n,limit),begin="number"==typeof begin?begin:0,begin<0&&(begin=Math.max(0,n+begin));for(var data=[],i=begin;i<n&&(data.push(input[i]),data.length!==limit);i++);var isArray="array"===type;if(isArray)return data;var target={};return recovery(target,data,function(el){target[el.key]=el.value})}function recovery(ret,array,callback){for(var i=0,n=array.length;i<n;i++)callback(array[i]);return ret}function convertArray(array){var ret=[],i=0;return avalon.each(array,function(key,value){ret[i++]={value:value,key:key}}),ret}var avalon=__webpack_require__(4);Number.isNaN=Number.isNaN||function(a){return a!==a},module.exports={limitBy:limitBy,orderBy:orderBy,selectBy:selectBy,filterBy:filterBy}},function(module,exports){var eventFilters={stop:function(e){return e.stopPropagation(),e},prevent:function(e){return e.preventDefault(),e}},keys={esc:27,tab:9,enter:13,space:32,del:46,up:38,left:37,right:39,down:40};for(var name in keys)!function(filter,key){eventFilters[filter]=function(e){return e.which!==key&&(e.$return=!0),e}}(name,keys[name]);module.exports=eventFilters},function(module,exports){function escape(str){return String(str).replace(/&/g,"&amp;").replace(rsurrogate,function(value){var hi=value.charCodeAt(0),low=value.charCodeAt(1);return"&#"+(1024*(hi-55296)+(low-56320)+65536)+";"}).replace(rnoalphanumeric,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var rsurrogate=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rnoalphanumeric=/([^\#-~| |!])/g;module.exports=escape},function(module,exports,__webpack_require__){var VText=__webpack_require__(16),VComment=__webpack_require__(18),VElement=__webpack_require__(19),VFragment=__webpack_require__(20);avalon.vdomAdaptor=function(obj,method){if(!obj)return"toHTML"===method?"":document.createDocumentFragment();switch(obj.nodeName){case"#text":return VText.prototype[method].call(obj);case"#comment":return VComment.prototype[method].call(obj);case"#document-fragment":return VFragment.prototype[method].call(obj);case void 0:return new VFragment(obj)[method]();default:return VElement.prototype[method].call(obj)}},module.exports={VText:VText,VComment:VComment,VElement:VElement,VFragment:VFragment}},function(module,exports,__webpack_require__){function VText(text){this.nodeName="#text",this.nodeValue=text,this.skipContent=!rexpr.test(text)}var rexpr=avalon.config.rexpr,decode=__webpack_require__(17);VText.prototype={constructor:VText,toDOM:function(){if(this.dom)return this.dom;var v=decode(this.nodeValue);return this.dom=document.createTextNode(v)},toHTML:function(){return this.nodeValue}},module.exports=VText},function(module,exports){var rentities=/&[a-z0-9#]{2,10};/,temp=avalon.avalonDiv;module.exports=function(str){return rentities.test(str)?(temp.innerHTML=str,temp.innerText||temp.textContent):str}},function(module,exports){function VComment(text){this.nodeName="#comment",this.nodeValue=text}VComment.prototype={constructor:VComment,toDOM:function(){return this.dom=document.createComment(this.nodeValue)},toHTML:function(){return"<!--"+this.nodeValue+"-->"}},module.exports=VComment},function(module,exports){function VElement(type,props,children){this.nodeName=type,this.props=props,this.children=children}function skipFalseAndFunction(a){return a!==!1&&Object(a)!==a}function createVML(type){document.styleSheets.length<31?document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):document.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");var arr=type.split(":");1===arr.length&&arr.unshift("v");var tag=arr[1],ns=arr[0];return document.namespaces[ns]||document.namespaces.add(ns,"urn:schemas-microsoft-com:vml"),document.createElement("<"+ns+":"+tag+' class="rvml">')}function createSVG(type){return document.createElementNS("http://www.w3.org/2000/svg",type)}var specal={class:function(dom,val){dom.className=val},style:function(dom,val){dom.style.cssText=val},for:function(dom,val){dom.htmlFor=val}},svgTags=avalon.oneObject("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use,g,svg"),VMLTags=avalon.oneObject("shape,line,polyline,rect,roundrect,oval,arc,curve,background,image,shapetype,group,fill,stroke,shadow, extrusion, textbox, imagedata, textpath"),rvml=/^\w+\:\w+/;VElement.prototype={constructor:VElement,toDOM:function(){if(this.dom)return this.dom;var dom,tagName=this.nodeName;dom=avalon.modern&&svgTags[tagName]?createSVG(tagName):avalon.modern||!VMLTags[tagName]&&!rvml.test(tagName)?document.createElement(tagName):createVML(tagName);var props=this.props||{},wid=props["ms-important"]||props["ms-controller"]||this.wid;if(wid){var scope=avalon.scopes[wid],element=scope&&scope.vmodel&&scope.vmodel.$element;if(element){var oldVdom=element.vtree[0];return oldVdom.children&&(this.children=oldVdom.children),element}}for(var i in props){var val=props[i];skipFalseAndFunction(val)&&(specal[i]&&avalon.msie<8?specal[i](dom,val):dom.setAttribute(i,val+""))}var c=this.children||[],template=c[0]?c[0].nodeValue:"";switch(this.nodeName){case"script":dom.text=template;break;case"style":"styleSheet"in dom?(dom.setAttribute("type","text/css"),dom.styleSheet.cssText=template):dom.innerHTML=template;break;case"xmp":case"noscript":dom.innerText=dom.textContent=template;break;case"template":dom.innerHTML=template;break;default:this.isVoidTag||this.children.forEach(function(c){c&&dom.appendChild(avalon.vdomAdaptor(c,"toDOM"))})}return this.dom=dom},toHTML:function(){var arr=[],props=this.props||{};for(var i in props){var val=props[i];skipFalseAndFunction(val)&&arr.push(i+"="+avalon.quote(props[i]+""))}arr=arr.length?" "+arr.join(" "):"";var str="<"+this.nodeName+arr;return this.isVoidTag?str+"/>":(str+=">",this.children&&(str+=this.children.map(function(c){return c?avalon.vdomAdaptor(c,"toHTML"):""}).join("")),str+"</"+this.nodeName+">")}},module.exports=VElement},function(module,exports){function VFragment(a){this.nodeName="#document-fragment",this.children=a}VFragment.prototype={constructor:VFragment,toDOM:function(){if(this.dom)return this.dom;for(var el,f=document.createDocumentFragment(),i=0;el=this.children[i++];)f.appendChild(avalon.vdomAdaptor(el,"toDOM"));return this.split=f.lastChild,this.dom=f},toHTML:function(){return this.children.map(function(a){return avalon.vdomAdaptor(a,"toHTML")}).join("")}},module.exports=VFragment},function(module,exports,__webpack_require__){__webpack_require__(22),__webpack_require__(23),__webpack_require__(24),__webpack_require__(27),__webpack_require__(28),__webpack_require__(29),__webpack_require__(32),__webpack_require__(34),module.exports=avalon},function(module,exports,__webpack_require__){function fixContains(root,el){try{for(;el=el.parentNode;)if(el===root)return!0;return!1}catch(e){return!1}}var avalon=__webpack_require__(4);avalon.contains=fixContains,avalon.browser&&(document.contains||(document.contains=function(b){return fixContains(document,b)}),window.Node&&!document.createTextNode("x").contains&&(Node.prototype.contains=function(arg){return!!(16&this.compareDocumentPosition(arg))}),window.HTMLElement&&!avalon.root.outerHTML&&HTMLElement.prototype.__defineGetter__("outerHTML",function(){var div=document.createElement("div");return div.appendChild(this),div.innerHTML}))},function(module,exports,__webpack_require__){function fakeClassList(node){if(!("classList"in node)){node.classList={node:node};for(var k in fakeClassListMethods)node.classList[k.slice(1)]=fakeClassListMethods[k]}return node.classList}var avalon=__webpack_require__(4),rnowhite=/\S+/g,fakeClassListMethods={_toString:function(){var node=this.node,cls=node.className,str="string"==typeof cls?cls:cls.baseVal,match=str.match(rnowhite);return match?match.join(" "):""},_contains:function(cls){return(" "+this+" ").indexOf(" "+cls+" ")>-1},_add:function(cls){this.contains(cls)||this._set(this+" "+cls)},_remove:function(cls){this._set((" "+this+" ").replace(" "+cls+" "," "))},__set:function(cls){cls=cls.trim();var node=this.node;"object"==typeof node.className?node.setAttribute("class",cls):node.className=cls}};"add,remove".replace(avalon.rword,function(method){avalon.fn[method+"Class"]=function(cls){var el=this[0]||{};return cls&&"string"==typeof cls&&1===el.nodeType&&cls.replace(rnowhite,function(c){fakeClassList(el)[method](c)}),this}}),avalon.fn.mix({hasClass:function(cls){var el=this[0]||{};return 1===el.nodeType&&fakeClassList(el).contains(cls)},toggleClass:function(value,stateVal){var isBool="boolean"==typeof stateVal,me=this;return String(value).replace(rnowhite,function(c){var state=isBool?stateVal:!me.hasClass(c);me[state?"addClass":"removeClass"](c)}),this}})},function(module,exports,__webpack_require__){function attrUpdate(node,vnode){var attrs=vnode.changeAttr;if(node&&1===node.nodeType&&attrs){vnode.dynamic["ms-attr"]=1;for(var attrName in attrs){var val=attrs[attrName];if("href"===attrName||"src"===attrName){if(node.hasAttribute||(val=String(val).replace(ramp,"&")),node[attrName]=val,window.chrome&&"EMBED"===node.tagName){var parent=node.parentNode,comment=document.createComment("ms-src");parent.replaceChild(comment,node),parent.replaceChild(node,comment)}}else if(0===attrName.indexOf("data-"))node.setAttribute(attrName,val);else{var propName=propMap[attrName]||attrName;if("boolean"==typeof node[propName]&&(node[propName]=!!val),val===!1){node.removeAttribute(propName);continue}var isInnate=!rsvg.test(node)&&(!(avalon.modern||!isVML(node))||attrName in node.cloneNode(!1));isInnate?node[propName]=val+"":node.setAttribute(attrName,val)}}vnode.changeAttr=null}}var avalon=__webpack_require__(4),propMap=__webpack_require__(25),isVML=__webpack_require__(26),rsvg=/^\[object SVG\w*Element\]$/,ramp=/&amp;/g,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON="object"==typeof JSON?JSON.parse:function(data){if("string"==typeof data){if(data=data.trim(),data&&rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))return new Function("return "+data)();avalon.error("Invalid JSON: "+data)}return data},avalon.fn.attr=function(name,value){return 2===arguments.length?(this[0].setAttribute(name,value),this):this[0].getAttribute(name)},module.exports=attrUpdate},function(module,exports){var propMap={"accept-charset":"acceptCharset",char:"ch",charoff:"chOff",class:"className",for:"htmlFor","http-equiv":"httpEquiv"},bools=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected,","isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(",");bools.replace(/\w+/g,function(name){propMap[name.toLowerCase()]=name});var anomaly=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,contentEditable,frameBorder,longDesc,maxLength,marginWidth,marginHeight,rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");anomaly.replace(/\w+/g,function(name){propMap[name.toLowerCase()]=name}),module.exports=propMap},function(module,exports){
function isVML(src){var nodeName=src.nodeName;return nodeName.toLowerCase()===nodeName&&src.scopeName&&""===src.outerText}module.exports=isVML},function(module,exports,__webpack_require__){function showHidden(node,array){if(node.offsetWidth<=0){if(rdisplayswap.test(cssHooks["@:get"](node,"display"))){var obj={node:node};for(var name in cssShow)obj[name]=node.style[name],node.style[name]=cssShow[name];array.push(obj)}var parent=node.parentNode;parent&&1===parent.nodeType&&showHidden(parent,array)}}function getWindow(node){return node.window||node.defaultView||node.parentWindow||!1}var avalon=__webpack_require__(4),root=avalon.root,camelize=avalon.camelize,cssHooks=avalon.cssHooks,prefixes=["","-webkit-","-o-","-moz-","-ms-"],cssMap={float:avalon.modern?"cssFloat":"styleFloat"};if(avalon.cssNumber=avalon.oneObject("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),avalon.cssName=function(name,host,camelCase){if(cssMap[name])return cssMap[name];host=host||root.style||{};for(var i=0,n=prefixes.length;i<n;i++)if(camelCase=camelize(prefixes[i]+name),camelCase in host)return cssMap[name]=camelCase;return null},avalon.fn.css=function(name,value){if(avalon.isPlainObject(name))for(var i in name)avalon.css(this,i,name[i]);else var ret=avalon.css(this,name,value);return void 0!==ret?ret:this},avalon.fn.position=function(){var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};return elem?("fixed"===this.css("position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),"HTML"!==offsetParent[0].tagName&&(parentOffset=offsetParent.offset()),parentOffset.top+=avalon.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=avalon.css(offsetParent[0],"borderLeftWidth",!0),parentOffset.top-=offsetParent.scrollTop(),parentOffset.left-=offsetParent.scrollLeft()),{top:offset.top-parentOffset.top-avalon.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-avalon.css(elem,"marginLeft",!0)}):parentOffset},avalon.fn.offsetParent=function(){for(var offsetParent=this[0].offsetParent;offsetParent&&"static"===avalon.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return avalon(offsetParent||root)},cssHooks["@:set"]=function(node,name,value){try{node.style[name]=value}catch(e){}},"function"==typeof getComputedStyle)cssHooks["@:get"]=function(node,name){if(!node||!node.style)throw new Error("getComputedStyle要求传入一个节点 "+node);var ret,styles=getComputedStyle(node,null);return styles&&(ret="filter"===name?styles.getPropertyValue(name):styles[name],""===ret&&(ret=node.style[name])),ret},cssHooks["opacity:get"]=function(node){var ret=cssHooks["@:get"](node,"opacity");return""===ret?"1":ret};else{var rnumnonpx=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,rposition=/^(top|right|bottom|left)$/,ralpha=/alpha\([^)]*\)/i,ie8=8===avalon.msie,salpha="DXImageTransform.Microsoft.Alpha",border={thin:ie8?"1px":"2px",medium:ie8?"3px":"4px",thick:ie8?"5px":"6px"};cssHooks["@:get"]=function(node,name){var currentStyle=node.currentStyle,ret=currentStyle[name];if(rnumnonpx.test(ret)&&!rposition.test(ret)){var style=node.style,left=style.left,rsLeft=node.runtimeStyle.left;node.runtimeStyle.left=currentStyle.left,style.left="fontSize"===name?"1em":ret||0,ret=style.pixelLeft+"px",style.left=left,node.runtimeStyle.left=rsLeft}return"medium"===ret&&(name=name.replace("Width","Style"),"none"===currentStyle[name]&&(ret="0px")),""===ret?"auto":border[ret]||ret},cssHooks["opacity:set"]=function(node,name,value){var style=node.style,opacity=isFinite(value)&&value<=1?"alpha(opacity="+100*value+")":"",filter=style.filter||"";style.zoom=1,style.filter=(ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity).trim(),style.filter||style.removeAttribute("filter")},cssHooks["opacity:get"]=function(node){var alpha=node.filters.alpha||node.filters[salpha],op=alpha&&alpha.enabled?alpha.opacity:100;return op/100+""}}"top,left".replace(avalon.rword,function(name){cssHooks[name+":get"]=function(node){var computed=cssHooks["@:get"](node,name);return/px$/.test(computed)?computed:avalon(node).position()[name]+"px"}});var cssShow={position:"absolute",visibility:"hidden",display:"block"},rdisplayswap=/^(none|table(?!-c[ea]).+)/;avalon.each({Width:"width",Height:"height"},function(name,method){var clientProp="client"+name,scrollProp="scroll"+name,offsetProp="offset"+name;cssHooks[method+":get"]=function(node,which,override){var boxSizing=-4;"number"==typeof override&&(boxSizing=override),which="Width"===name?["Left","Right"]:["Top","Bottom"];var ret=node[offsetProp];return 2===boxSizing?ret+avalon.css(node,"margin"+which[0],!0)+avalon.css(node,"margin"+which[1],!0):(boxSizing<0&&(ret=ret-avalon.css(node,"border"+which[0]+"Width",!0)-avalon.css(node,"border"+which[1]+"Width",!0)),boxSizing===-4&&(ret=ret-avalon.css(node,"padding"+which[0],!0)-avalon.css(node,"padding"+which[1],!0)),ret)},cssHooks[method+"&get"]=function(node){var hidden=[];showHidden(node,hidden);for(var obj,val=cssHooks[method+":get"](node),i=0;obj=hidden[i++];){node=obj.node;for(var n in obj)"string"==typeof obj[n]&&(node.style[n]=obj[n])}return val},avalon.fn[method]=function(value){var node=this[0];if(0===arguments.length){if(node.setTimeout)return node["inner"+name]||node.document.documentElement[clientProp]||node.document.body[clientProp];if(9===node.nodeType){var doc=node.documentElement;return Math.max(node.body[scrollProp],doc[scrollProp],node.body[offsetProp],doc[offsetProp],doc[clientProp])}return cssHooks[method+"&get"](node)}return this.css(method,value)},avalon.fn["inner"+name]=function(){return cssHooks[method+":get"](this[0],void 0,-2)},avalon.fn["outer"+name]=function(includeMargin){return cssHooks[method+":get"](this[0],void 0,includeMargin===!0?2:0)}}),avalon.fn.offset=function(){var node=this[0],box={left:0,top:0};if(!node||!node.tagName||!node.ownerDocument)return box;var doc=node.ownerDocument,body=doc.body,root=doc.documentElement,win=doc.defaultView||doc.parentWindow;if(!avalon.contains(root,node))return box;node.getBoundingClientRect&&(box=node.getBoundingClientRect());var clientTop=root.clientTop||body.clientTop,clientLeft=root.clientLeft||body.clientLeft,scrollTop=Math.max(win.pageYOffset||0,root.scrollTop,body.scrollTop),scrollLeft=Math.max(win.pageXOffset||0,root.scrollLeft,body.scrollLeft);return{top:box.top+scrollTop-clientTop,left:box.left+scrollLeft-clientLeft}},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){avalon.fn[method]=function(val){var node=this[0]||{},win=getWindow(node),top="scrollTop"===method;return arguments.length?void(win?win.scrollTo(top?avalon(win).scrollLeft():val,top?val:avalon(win).scrollTop()):node[method]=val):win?prop in win?win[prop]:root[method]:node[method]}})},function(module,exports,__webpack_require__){function getValType(elem){var ret=elem.tagName.toLowerCase();return"input"===ret&&/checkbox|radio/.test(elem.type)?"checked":ret}var avalon=__webpack_require__(4),roption=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i,valHooks={"option:get":avalon.msie?function(node){return roption.test(node.outerHTML)?node.value:node.text.trim()}:function(node){return node.value},"select:get":function(node,value){for(var option,options=node.options,index=node.selectedIndex,getter=valHooks["option:get"],one="select-one"===node.type||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(option=options[i],(option.selected||i===index)&&!option.disabled&&(!option.parentNode.disabled||"OPTGROUP"!==option.parentNode.tagName)){if(value=getter(option),one)return value;values.push(value)}return values},"select:set":function(node,values,optionSet){values=[].concat(values);for(var el,getter=valHooks["option:get"],i=0;el=node.options[i++];)(el.selected=values.indexOf(getter(el))>-1)&&(optionSet=!0);optionSet||(node.selectedIndex=-1)}};avalon.fn.val=function(value){var node=this[0];if(node&&1===node.nodeType){var get=0===arguments.length,access=get?":get":":set",fn=valHooks[getValType(node)+access];if(fn)var val=fn(node,value);else{if(get)return(node.value||"").replace(/\r/g,"");node.value=value}}return get?val:this}},function(module,exports,__webpack_require__){var Cache=__webpack_require__(30),avalon=__webpack_require__(4),fixCloneNode=__webpack_require__(31),rhtml=/<|&#?\w+;/,htmlCache=new Cache(128),rxhtml=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;avalon.parseHTML=function(html){var fragment=avalon.avalonFragment.cloneNode(!1);if("string"!=typeof html)return fragment;if(!rhtml.test(html))return document.createTextNode(html);html=html.replace(rxhtml,"<$1></$2>").trim();var hasCache=htmlCache.get(html);if(hasCache)return fixCloneNode(hasCache);for(var el,vnodes=avalon.lexer(html),i=0;el=vnodes[i++];)fragment.appendChild(avalon.vdomAdaptor(el,"toDOM"));return html.length<1024&&htmlCache.put(html,fixCloneNode(fragment)),fragment},avalon.innerHTML=function(node,html){var parsed=this.parseHTML(html);this.clearHTML(node).appendChild(parsed)};var reunescapeHTML=/&(?:amp|lt|gt|quot|#39|#96);/g,htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"};avalon.unescapeHTML=function(string){var str=""+string;return str.replace(reunescapeHTML,function(c){return htmlUnescapes[c]})},avalon.clearHTML=function(node){for(node.textContent="";node.lastChild;)node.removeChild(node.lastChild);return node}},function(module,exports){function LRU(maxLength){this.size=0,this.limit=maxLength,this.head=this.tail=void 0,this._keymap={}}var p=LRU.prototype;p.put=function(key,value){var removed,entry=this.get(key,!0);return entry||(this.size===this.limit&&(removed=this.shift()),entry={key:key},this._keymap[key]=entry,this.tail?(this.tail.newer=entry,entry.older=this.tail):this.head=entry,this.tail=entry,this.size++),entry.value=value,removed},p.shift=function(){var entry=this.head;return entry&&(this.head=this.head.newer,this.head.older=void 0,entry.newer=entry.older=void 0,this._keymap[entry.key]=void 0,this.size--),entry},p.get=function(key){var entry=this._keymap[key];if(void 0!==entry)return entry===this.tail?entry.value:(entry.newer&&(entry===this.head&&(this.head=entry.newer),entry.newer.older=entry.older),entry.older&&(entry.older.newer=entry.newer),entry.newer=void 0,entry.older=this.tail,this.tail&&(this.tail.newer=entry),this.tail=entry,entry.value)},module.exports=LRU},function(module,exports){function fix(dest,src){if(1===dest.nodeType){var nodeName=dest.nodeName.toLowerCase();"object"===nodeName?dest.parentNode&&(dest.outerHTML=src.outerHTML):"input"===nodeName&&rcheckedType.test(src.nodeName)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}}function getAll(context){return"undefined"!=typeof context.getElementsByTagName?context.getElementsByTagName("*"):"undefined"!=typeof context.querySelectorAll?context.querySelectorAll("*"):[]}function fixCloneNode(src){var target=src.cloneNode(!0);if(avalon.modern)return target;var t=getAll(target),s=getAll(src);return avalon.each(s,function(i){fix(t[i],s[i])}),target}var rcheckedType=/radio|checkbox/;module.exports=fixCloneNode},function(module,exports,__webpack_require__){function collectHandlers(elem,type,handlers){var value=elem.getAttribute("avalon-events");if(value&&(elem.disabled!==!0||"click"!==type)){var uuids=[],reg=typeRegExp[type]||(typeRegExp[type]=new RegExp("\\b"+type+"\\:([^,\\s]+)","g"));value.replace(reg,function(a,b){return uuids.push(b),a}),uuids.length&&handlers.push({elem:elem,uuids:uuids})}elem=elem.parentNode;var g=avalon.gestureEvents||{};elem&&elem.getAttribute&&(canBubbleUp[type]||g[type])&&collectHandlers(elem,type,handlers)}function dispatch(event){event=new avEvent(event);var type=event.type,elem=event.target,handlers=[];collectHandlers(elem,type,handlers);for(var j,uuid,handler,i=0;(handler=handlers[i++])&&!event.cancelBubble;){var host=event.currentTarget=handler.elem;for(j=0;uuid=handler.uuids[j++];){if(stopImmediate){stopImmediate=!1;break}var fn=avalon.eventListeners[uuid];if(fn){var vm=rhandleHasVm.test(uuid)?handler.elem._ms_context_:0;if(vm&&vm.$hashcode===!1)return avalon.unbind(elem,type,fn);var ret=fn.call(vm||elem,event,host._ms_local);ret===!1&&(event.preventDefault(),event.stopPropagation())}}}}function delegateEvent(type){var value=root.getAttribute("delegate-events")||"";if(value.indexOf(type)===-1){var arr=value.match(avalon.rword)||[];arr.push(type),root.setAttribute("delegate-events",arr.join(",")),nativeBind(root,type,dispatch,!!focusBlur[type])}}function avEvent(event){if(event.originalEvent)return this;for(var i in event)rconstant.test(i)||"function"==typeof event[i]||(this[i]=event[i]);this.target||(this.target=event.srcElement);var target=this.target;if(null==this.which&&0===event.type.indexOf("key"))this.which=null!=event.charCode?event.charCode:event.keyCode;else if(rmouseEvent.test(event.type)&&!("pageX"in this)){var doc=target.ownerDocument||document,box="BackCompat"===doc.compatMode?doc.body:doc.documentElement;this.pageX=event.clientX+(box.scrollLeft>>0)-(box.clientLeft>>0),this.pageY=event.clientY+(box.scrollTop>>0)-(box.clientTop>>0),this.wheelDeltaY=this.wheelDelta,this.wheelDeltaX=0}this.timeStamp=new Date-0,this.originalEvent=event}var avalon=__webpack_require__(4),document=avalon.document,root=avalon.root,window=avalon.window,W3C=avalon.modern,getShortID=__webpack_require__(6).getShortID,canBubbleUp=__webpack_require__(33);W3C||(delete canBubbleUp.change,delete canBubbleUp.select);var eventHooks=avalon.eventHooks;avalon.bind=function(elem,type,fn){if(1===elem.nodeType){var value=elem.getAttribute("avalon-events")||"",uuid=getShortID(fn),hook=eventHooks[type];hook&&(type=hook.type||type,hook.fix&&(fn=hook.fix(elem,fn),fn.uuid=uuid));var key=type+":"+uuid;avalon.eventListeners[fn.uuid]=fn,value.indexOf(type+":")===-1&&(canBubbleUp[type]||avalon.modern&&focusBlur[type]?delegateEvent(type):nativeBind(elem,type,dispatch));var keys=value.split(",");""===keys[0]&&keys.shift(),keys.indexOf(key)===-1&&(keys.push(key),elem.setAttribute("avalon-events",keys.join(",")))}else nativeBind(elem,type,fn);return fn},avalon.unbind=function(elem,type,fn){if(1===elem.nodeType){var value=elem.getAttribute("avalon-events")||"";switch(arguments.length){case 1:nativeUnBind(elem,type,dispatch),elem.removeAttribute("avalon-events");break;case 2:value=value.split(",").filter(function(str){return str.indexOf(type+":")===-1}).join(","),elem.setAttribute("avalon-events",value);break;default:var search=type+":"+fn.uuid;value=value.split(",").filter(function(str){return str!==search}).join(","),elem.setAttribute("avalon-events",value),delete avalon.eventListeners[fn.uuid]}}else nativeUnBind(elem,type,fn)};var typeRegExp={},rhandleHasVm=/^e/,stopImmediate=!1,focusBlur={focus:!0,blur:!0},nativeBind=W3C?function(el,type,fn,capture){el.addEventListener(type,fn,capture)}:function(el,type,fn){el.attachEvent("on"+type,fn)},nativeUnBind=W3C?function(el,type,fn){el.removeEventListener(type,fn)}:function(el,type,fn){el.detachEvent("on"+type,fn)};avalon.fireDom=function(elem,type,opts){if(document.createEvent){var hackEvent=document.createEvent("Events");hackEvent.initEvent(type,!0,!0,opts),avalon.shadowCopy(hackEvent,opts),elem.dispatchEvent(hackEvent)}else root.contains(elem)&&(hackEvent=document.createEventObject(),avalon.shadowCopy(hackEvent,opts),elem.fireEvent("on"+type,hackEvent))};var rmouseEvent=/^(?:mouse|contextmenu|drag)|click/,rconstant=/^[A-Z_]+$/;if(avEvent.prototype={preventDefault:function(){var e=this.originalEvent||{};e.returnValue=this.returnValue=!1,e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent||{};e.cancelBubble=this.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){stopImmediate=!0,this.stopPropagation()},toString:function(){return"[object Event]"}},"onmouseenter"in root||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(origType,fixType){eventHooks[origType]={type:fixType,fix:function(elem,fn){return function(e){var t=e.relatedTarget;if(!t||t!==elem&&!(16&elem.compareDocumentPosition(t)))return delete e.type,e.type=origType,fn.apply(this,arguments)}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(construct,fixType){window[construct]&&!eventHooks.animationend&&(eventHooks.animationend={type:fixType})}),"oninput"in document.createElement("input")||(eventHooks.input={type:"propertychange",fix:function(elem,fn){return function(e){if("value"===e.propertyName)return e.type="input",fn.apply(this,arguments)}}}),void 0===document.onmousewheel){var fixWheelType=void 0!==document.onwheel?"wheel":"DOMMouseScroll",fixWheelDelta="wheel"===fixWheelType?"deltaY":"detail";eventHooks.mousewheel={type:fixWheelType,fix:function(elem,fn){return function(e){var delta=e[fixWheelDelta]>0?-120:120;return e.wheelDelta=~~elem._ms_wheel_+delta,elem._ms_wheel_=e.wheelDeltaY=e.wheelDelta,e.wheelDeltaX=0,Object.defineProperty&&Object.defineProperty(e,"type",{value:"mousewheel"}),fn.apply(this,arguments)}}}}avalon.fn.bind=function(type,fn,phase){if(this[0])return avalon.bind(this[0],type,fn,phase)},avalon.fn.unbind=function(type,fn,phase){return this[0]&&avalon.unbind(this[0],type,fn,phase),this}},function(module,exports){module.exports={click:!0,dblclick:!0,keydown:!0,keypress:!0,keyup:!0,mousedown:!0,mousemove:!0,mouseup:!0,mouseover:!0,mouseout:!0,wheel:!0,mousewheel:!0,input:!0,change:!0,beforeinput:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,select:!0,cut:!0,copy:!0,paste:!0,beforecut:!0,beforecopy:!0,beforepaste:!0,focusin:!0,focusout:!0,DOMFocusIn:!0,DOMFocusOut:!0,DOMActivate:!0,dragend:!0,datasetchanged:!0}},function(module,exports,__webpack_require__){var isReady,avalon=__webpack_require__(4),scan=__webpack_require__(35),document=avalon.document,readyList=[],fireReady=function(fn){for(isReady=!0;fn=readyList.shift();)fn(avalon)};avalon.ready=function(fn){isReady?fn(avalon):readyList.push(fn)},avalon.ready(function(){scan(document.body)}),new function(){function doScrollCheck(){try{root.doScroll("left"),fireReady()}catch(e){setTimeout(doScrollCheck)}}if(avalon.browser){var root=avalon.root;if("complete"===document.readyState)setTimeout(fireReady);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",fireReady);else if(document.attachEvent){document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&fireReady()});try{var isTop=null===window.frameElement}catch(e){}root.doScroll&&isTop&&window.external&&doScrollCheck()}avalon.bind(window,"load",fireReady)}}},function(module,exports,__webpack_require__){function scan(nodes){for(var elem,i=0;elem=nodes[i++];)if(1===elem.nodeType){var $id=getController(elem),vm=avalon.vmodels[$id];if(vm&&!vm.$element){if(vm.$element=elem,avalon.serverTemplates&&avalon.serverTemplates[$id]){var tmpl=avalon.serverTemplates[$id],oldTree=avalon.speedUp(avalon.lexer(tmpl)),render=avalon.render(oldTree),vtree=render(vm),dom=avalon.vdomAdaptor(vtree[0],"toDOM");vm.$element=dom,dom.vtree=vtree,vm.$render=render,elem.parentNode.replaceChild(dom,elem),avalon.diff(vtree,vtree);continue}var vtree=dom2vdom(elem),now=new Date;elem.vtree=avalon.speedUp(vtree);var now2=new Date;vm.$render=avalon.render(elem.vtree),avalon.scopes[vm.$id]={vmodel:vm,local:{},isTemp:!0};var now3=new Date;avalon.rerenderStart=now3,onceWarn=!1,avalon.batch($id)}else $id||scan(elem.childNodes)}}function getController(a){return a.getAttribute("ms-controller")||a.getAttribute(":controller")}var onceWarn=!0,dom2vdom=__webpack_require__(36);module.exports=avalon.scan=function(a){return a&&a.nodeType?void scan([a]):void avalon.warn("[avalon.scan] first argument must be element , documentFragment, or document")}},function(module,exports,__webpack_require__){function getAttributes(node){for(var attrs=node.attributes,ret={},i=0,n=attrs.length;i<n;i++){var attr=attrs[i];if(attr.specified){var name=attr.name;":"===name.charAt(0)&&(name=name.replace(rcolon,"ms-")),ret[name]=attr.value}}rformElement.test(node.nodeName)&&(ret.type=node.type);var style=node.style.cssText;return style&&(ret.style=style),"select-one"===ret.type&&(ret.selectedIndex=node.selectedIndex),isEmpty(ret)?null:ret}function isEmpty(a){for(var i in a)return!1;return!0}function createVDOM(node){var ret={},type=node.nodeName.toLowerCase();if(ret.nodeName=type,ret.dom=node,"#"===type.charAt(0)){var nodeValue=node.nodeValue;/\S/.test(nodeValue)&&(ret.nodeValue=nodeValue)}else{var props=getAttributes(node);voidTag[type]&&(ret.isVoidTag=!0),props&&(ret.props=props),ret.children=createVDOMs(node.childNodes,node),props&&"selectedIndex"in ret&&(node.selectedIndex=ret.selectedIndex,delete ret.selectedIndex,isEmpty(props)&&delete ret.props)}return ret}function render(node){return createVDOMs([node],null)}function createVDOMs(nodes,parent){var arr=[];nodes=avalon.slice(nodes);for(var i=0;i<nodes.length;i++){var node=nodes[i];switch(node.nodeType){case 1:var a=node.getAttributeNode(":for")||node.getAttributeNode("ms-for");if(a){var start=document.createComment("ms-for:"+a.value),end=document.createComment("ms-for-end:");node.removeAttributeNode(a),parent&&(parent.insertBefore(end,node.nextSibling),parent.insertBefore(start,node)),arr.push(createVDOM(start),createVDOM(node),createVDOM(end))}else arr.push(createVDOM(node));break;case 3:/\S/.test(node.nodeValue)?arr.push(createVDOM(node)):removeNode(node);break;case 8:arr.push(createVDOM(node))}}return arr}function removeNode(node){return f.appendChild(node),f.removeChild(node),node}var voidTag=__webpack_require__(37),rformElement=(__webpack_require__(38),/input|textarea|select/i),rcolon=/^\:/,f=avalon.avalonFragment;module.exports=render},function(module,exports){module.exports=avalon.oneObject("area,base,basefont,bgsound,br,col,command,embed,frame,hr,img,input,keygen,link,meta,param,source,track,wbr")},function(module,exports,__webpack_require__){function parseNodes(source,inner){for(var el,buffer=inner?[]:["\nvar vnodes = [];"],i=0;el=source[i++];){var vnode=parseNode(el);el.$prepend&&buffer.push(el.$prepend);var append=el.$append;delete el.$append,delete el.$prepend,vnode&&buffer.push(vnode+"\n"),append&&buffer.push(append)}return inner||buffer.push("return vnodes\n"),buffer.join("\n")}function parseNode(vdom){if(!vdom.nodeName)return!1;switch(vdom.nodeName){case"#text":return vdom.dynamic?add(parseText(vdom)):addTag(vdom);case"#comment":var nodeValue=vdom.nodeValue;if(vdom.forExpr){var copy={dynamic:!0,vmodel:"__vmodel__"};for(var i in vdom)vdom.hasOwnProperty(i)&&!skips[i]&&(copy[i]=vdom[i]);return avalon.directives.for.parse(copy,vdom,vdom),vdom.$append+=avalon.caches[vdom.signature],addTag(copy)}if("ms-for-end:"===nodeValue)return vdom.$append=addTag({nodeName:"#comment",nodeValue:vdom.signature})+" return vnodes}\n })\n},__local__,vnodes)\n"+addTag({nodeName:"#comment",signature:vdom.signature,nodeValue:"ms-for-end:"})+"\n","";if(0===nodeValue.indexOf("ms-js:")){var statement=parseExpr(nodeValue.replace("ms-js:",""),"js")+"\n",ret=addTag(vdom),match=statement.match(rstatement);return match&&match[1]?vdom.$append=(vdom.$append||"")+statement+"\n__local__."+match[1]+" = "+match[1]+"\n":avalon.warn(nodeValue+" parse fail!"),ret}return addTag(vdom);default:if(!vdom.dynamic&&vdom.skipContent)return addTag(vdom);var copy={nodeName:vdom.nodeName},props=vdom.props;if(vdom.dynamic){copy.dynamic="{}";var bindings=extractBindings(copy,props);bindings.map(function(b){return avalon.directives[b.type].parse(copy,vdom,b),b.name})}else if(props){copy.props={};for(var i in props)copy.props[i]=props[i]}if(vdom.isVoidTag)copy.isVoidTag=!0;else if(!("children"in copy)){var c=vdom.children;c&&(vdom.skipContent?copy.children="["+c.map(function(a){return stringify(a)})+"]":1===c.length&&"#text"===c[0].nodeName?c[0].dynamic?copy.children="["+parseText(c[0])+"]":copy.children="["+stringify(c[0])+"]":copy.children="(function(){"+parseNodes(c)+"})()")}return vdom.template&&(copy.template=vdom.template),vdom.skipContent&&(copy.skipContent=!0),addTag(copy)}}function wrapDelimiter(expr){return rident.test(expr)?expr:parseExpr(expr,"text")}function add(a){return"vnodes.push("+a+");"}function addTag(obj){return add(stringify(obj))}function parseText(el){var array=extractExpr(el.nodeValue),nodeValue="";if(1===array.length)nodeValue=wrapDelimiter(array[0].expr);else{var token=array.map(function(el){return el.type?wrapDelimiter(el.expr):quote(el.expr)}).join(" + ");nodeValue="String("+token+")"}return'{\nnodeName: "#text",\ndynamic:true,\nnodeValue: '+nodeValue+"\n}"}function extractExpr(str){var ret=[];do{var index=str.indexOf(config.openTag);index=index===-1?str.length:index;var value=str.slice(0,index);if(/\S/.test(value)&&ret.push({expr:decode(value)}),str=str.slice(index+config.openTag.length)){index=str.indexOf(config.closeTag);var value=str.slice(0,index);ret.push({expr:avalon.unescapeHTML(value.replace(rlineSp,"")),type:"{{}}"}),str=str.slice(index+config.closeTag.length)}}while(str.length);return ret}var extractBindings=__webpack_require__(39),stringify=__webpack_require__(40),parseExpr=__webpack_require__(41),decode=__webpack_require__(17),config=avalon.config,quote=avalon.quote,rident=/^[$a-zA-Z_][$a-zA-Z0-9_]*$/,rstatement=/^\s*var\s+([$\w]+)\s*\=\s*\S+/,skips={__local__:1,vmode:1,dom:1};module.exports=parseNodes;var rlineSp=/\n\s*/g},function(module,exports){function extractBindings(cur,props){var bindings=[],attrs={},skip="ms-skip"in props,uniq={};for(var i in props){var match,value=props[i];if(attrs[i]=props[i],match=i.match(rbinding)){if(skip)continue;var arr=i.replace(match[1],"").split("-");eventMap[arr[0]]&&arr.unshift("on"),"on"===arr[0]&&(arr[2]=parseFloat(arr[2])||0),arr.unshift("ms");var type=arr[1];if(directives[type]){var binding={type:type,param:arr[2],name:arr.join("-"),expr:value,priority:directives[type].priority||100*type.charCodeAt(0)};"on"===type&&(binding.priority+=arr[3]),uniq[binding.name]||(uniq[binding.name]=value,bindings.push(binding))}}}return cur.props=attrs,bindings.sort(byPriority),bindings}function byPriority(a,b){return a.priority-b.priority}var directives=avalon.directives,rbinding=/^(\:|ms\-)\w+/,eventMap=avalon.oneObject("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit");module.exports=extractBindings},function(module,exports){function fixKey(k){return rneedQuote.test(k)||keyMap[k]?quote(k):k}function stringify(obj){var arr1=[];for(var i in obj){var type=typeof obj[i];if("object"===type)if("props"===i){var arr2=[];for(var k in obj.props){var kv=obj.props[k];"string"==typeof kv&&(kv=quote(kv)),arr2.push(fixKey(k)+": "+kv)}arr1.push(i+": {"+arr2.join(",\n")+"}")}else"children"===i&&arr1.push("children: ["+obj[i].map(function(a){return stringify(a)})+"]");else if(obj.hasOwnProperty(i)){var v=obj[i];"string"===type&&(v=quoted[i]?quote(v):v),arr1.push(fixKey(i)+":"+v)}}return"{\n"+arr1.join(",\n")+"}"}var keyMap=avalon.oneObject("break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile");avalon.keyMap=keyMap;var quoted={nodeName:1,template:1,forExpr:1,type:1,nodeValue:1,signature:1,wid:1},rneedQuote=/[W-]/,quote=avalon.quote;module.exports=stringify},function(module,exports,__webpack_require__){function collectLocal(str,ret){var arr=str.replace(rfilters,"").match(rvar);arr&&arr.filter(function(el){/^[@\d\-]/.test(el)||"##"===el.slice(0,2)||"$event"===el||avalon.keyMap[el]||(ret[el]=1)})}function extLocal(ret){var arr=[];for(var i in ret)arr.push("var "+i+" = __local__["+avalon.quote(i)+"]");return arr}function parseExpr(str,category){function dig(a){var key="??"+number++;return maps[key]=a,key}function fill(a){return maps[a]}var binding={};if(category=category||"other","object"==typeof str&&(category=str.type,binding=str,str=binding.expr),"string"!=typeof str)return"";var cacheID=str,cacheStr=evaluatorPool.get(category+":"+cacheID);if(cacheStr)return cacheStr;var number=1,maps={},input=str.replace(rregexp,dig).replace(rstring,dig).replace(rshortCircuit,dig).replace(ruselessSp,"$1").split(rpipeline),_body=input.shift(),local={},body=_body.replace(rfill,fill).trim();if("on"===category&&rhandleName.test(body)&&(body+="($event)"),body=body.replace(rAt,"$1__vmodel__."),"js"===category)return evaluatorPool.put(category+":"+cacheID,body);"on"===category&&collectLocal(_body,local);var filters=input.map(function(str){collectLocal(str.replace(/^\w+/g,""),local),str=str.replace(rfill,fill).replace(rAt,"$1__vmodel__.");var hasBracket=!1;return str=str.replace(brackets,function(a,b){return hasBracket=!0,/\S/.test(b)?"(__value__,"+b+");":"(__value__);"}),hasBracket||(str+="(__value__);"),str=str.replace(/(\w+)/,'avalon.__format__("$1")'),"__value__ = "+str}),ret=[];if("on"===category)filters=filters.map(function(el){return el.replace(/__value__/g,"$event")}),filters.length&&filters.push("if($event.$return){\n\treturn;\n}"),avalon.modern||(body=body.replace(/__vmodel__\.([^(]+)\(([^)]*)\)/,function(a,b,c){return"__vmodel__."+b+".call(__vmodel__"+(/\S/.test(c)?","+c:"")+")"})),ret=["function ($event, __local__){","try{",extLocal(local).join("\n"),"\tvar __vmodel__ = this;","\t"+body,"}catch(e){",quoteError(str,category),"}","}"],filters.unshift(2,0);else{if("duplex"===category){var setterBody=["function (__vmodel__,__value__){","try{","\t"+body+" = __value__","}catch(e){",quoteError(str,category).replace("parse","set"),"}","}"];evaluatorPool.put("duplex:set:"+cacheID,setterBody.join("\n"));var getterBody=["function (__vmodel__){","try{","var __value__ = "+body+"\n",filters.join("\n"),"return __value__\n","}catch(e){",quoteError(str,category).replace("parse","get"),"}","}"].join("\n");return evaluatorPool.put("duplex:get:"+cacheID,getterBody),getterBody}ret=["(function(){","try{","var __value__ = "+body,"text"===category?"return avalon.parsers.string(__value__)":"return __value__","}catch(e){",quoteError(str,category),'\treturn ""',"}","})()"],filters.unshift(3,0)}return ret.splice.apply(ret,filters),cacheStr=ret.join("\n"),evaluatorPool.put(category+":"+cacheID,cacheStr),cacheStr}function quoteError(str,type){return"\tavalon.warn(e, "+avalon.quote("parse "+type+" binding【 "+str+" 】fail")+")"}var evaluatorPool=__webpack_require__(42),rregexp=/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/g,rstring=/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/g,rfill=/\?\?\d+/g,brackets=/\(([^)]*)\)/,rshortCircuit=/\|\|/g,rpipeline=/\|(?=\w)/,ruselessSp=/\s*(\.|\|)\s*/g,rAt=/(^|[^\w\u00c0-\uFFFF_])(@|##)(?=[$\w])/g,rhandleName=/^(?:\@|##)[$\w\.]+$/i,rfilters=/\|.+/g,rvar=/((?:\@|\$|\#\#)?\w+)/g;module.exports=avalon.parseExpr=parseExpr},function(module,exports,__webpack_require__){var Cache=__webpack_require__(30);module.exports=new Cache(888)},function(module,exports,__webpack_require__){__webpack_require__(44),__webpack_require__(46),__webpack_require__(47),__webpack_require__(48),__webpack_require__(49),__webpack_require__(50),__webpack_require__(51),__webpack_require__(52),__webpack_require__(54),__webpack_require__(55),__webpack_require__(56),__webpack_require__(63),
__webpack_require__(64),__webpack_require__(65),__webpack_require__(66),__webpack_require__(67),__webpack_require__(70)},function(module,exports,__webpack_require__){var update=__webpack_require__(45);avalon.directive("important",{priority:1,parse:function(copy,src,binding){var quoted=avalon.quote(binding.expr);copy.local="{}",copy.vmodel="__vmodel__",copy[binding.name]=1;var vmodel="(function(){ return __vmodel__ = avalon.vmodels["+quoted+"]})()";src.$prepend=["(function(__vmodel__){","var important = avalon.scopes["+quoted+"]",'if(important){avalon.log("不进入"+'+quoted+");return }"].join("\n")+"\n"+vmodel,src.$append="\n})();"},diff:function(copy,src,name){src.dynamic[name]||(src.local=copy.local,src.vmodel=copy.vmodel,update(src,this.update))},update:function(dom,vdom,parent){avalon.directives.controller.update(dom,vdom,parent,"important")}})},function(module,exports){module.exports=function(vdom,update,hookName){if(hookName)vdom.afterChange=vdom.afterChange||[],avalon.Array.ensure(vdom.afterChange,update);else{var dom=vdom.dom;update(vdom.dom,vdom,dom&&dom.parentNode)}}},function(module,exports,__webpack_require__){var update=__webpack_require__(45),cache={};avalon.mediatorFactoryCache=function(__vmodel__,__present__){var a=__vmodel__.$hashcode,b=__present__.$hashcode,id=a+b;if(cache[id])return cache[id];var c=avalon.mediatorFactory(__vmodel__,__present__);return cache[id]=c},avalon.directive("controller",{priority:2,parse:function(copy,src,binding){var quoted=avalon.quote(binding.expr);copy.local="__local__",copy.vmodel="__vmodel__",copy[binding.name]=1;var vmodel=["(function(){","var vm = avalon.vmodels["+quoted+"]","if(vm && __vmodel__&& vm !== __vmodel__){","return __vmodel__ = avalon.mediatorFactoryCache(__vmodel__, vm)","}else if(vm){","return __vmodel__ = vm","}","})();"].join("\n");src.$prepend="(function(__vmodel__){"+vmodel,src.$append="\n})(__vmodel__);"},diff:function(copy,src,name){src.dynamic[name]||(src.local=copy.local,src.vmodel=copy.vmodel,update(src,this.update))},update:function(dom,vdom,parent,important){var vmodel=vdom.vmodel,local=vdom.local,name=important?"ms-important":"ms-controller";vdom.dynamic[name]=1;var id=vdom.props[name],scope=avalon.scopes[id];if(!scope){var top=avalon.vmodels[id];if(vmodel.$element&&vmodel.$element.vtree[0]===vdom)var render=vmodel.$render;else render=avalon.render([vdom],local);vmodel.$render=render,vmodel.$element=dom,dom.vtree=[vdom],top!==vmodel&&(top.$render=top.$render||render,top.$element=top.$element||dom);var needFire=important?vmodel:top,scope=avalon.scopes[id]={vmodel:vmodel,local:local};update(vdom,function(){avalon(dom).removeClass("ms-controller");var events=needFire.$events.onReady;events&&(needFire.$fire("onReady"),delete needFire.$events.onReady),scope.isMount=!0},"afterChange")}}})},function(module,exports,__webpack_require__){var attrUpdate=__webpack_require__(24),update=__webpack_require__(45);avalon.directive("attr",{diff:function(copy,src,name){var a=copy[name],p=src[name];if(a&&"object"==typeof a){if(a=a.$model||a,Array.isArray(a)&&(a=avalon.mix.apply({},a)),src.dynamic[name]&&p){var patch={},hasChange=!1;for(var i in a)a[i]!==p[i]&&(hasChange=!0,patch[i]=a[i]);hasChange&&(src[name]=a,src.changeAttr=patch)}else src.changeAttr=src[name]=a;src.changeAttr&&update(src,this.update)}copy!==src&&delete copy[name]},update:attrUpdate})},function(module,exports,__webpack_require__){var update=__webpack_require__(45);avalon.directive("css",{diff:function(copy,src,name){var a=copy[name],p=src[name];if(Object(a)===a){if(a=a.$model||a,Array.isArray(a)){var b={};a.forEach(function(el){el&&avalon.shadowCopy(b,el)}),a=b}var hasChange=!1;if(src.dynamic[name]&&p){var patch={};for(var i in a)a[i]!==p[i]&&(hasChange=!0),patch[i]=a[i];for(var i in p)i in patch||(hasChange=!0,patch[i]="");src[name]=patch}else src[name]=a,hasChange=!0;hasChange&&update(src,this.update)}delete copy[name]},update:function(dom,vdom){var wrap=avalon(dom);vdom.dynamic["ms-css"]=1;var change=vdom["ms-css"];for(var name in change)wrap.css(name,change[name])}})},function(module,exports,__webpack_require__){function parseDisplay(elem,val){var doc=elem.ownerDocument,nodeName=elem.nodeName,key="_"+nodeName;if(!parseDisplay[key]){var temp=doc.body.appendChild(doc.createElement(nodeName));val=avalon.modern?getComputedStyle(temp,null).display:temp.currentStyle.display,doc.body.removeChild(temp),val===none&&(val="block"),parseDisplay[key]=val}return parseDisplay[key]}var update=__webpack_require__(45),none="none";avalon.parseDisplay=parseDisplay,avalon.directive("visible",{diff:function(copy,src,name){var c=!!copy[name];src.dynamic[name]&&c===src[name]||(src[name]=c,update(src,this.update))},update:function(dom,vdom){function cb(){void 0!==value&&(dom.style.display=value)}if(dom&&1===dom.nodeType){vdom.dynamic["ms-visible"]=1;var value,show=vdom["ms-visible"],display=dom.style.display;show?(display===none&&(value=vdom.displayValue,value||(dom.style.display="")),""===dom.style.display&&avalon(dom).css("display")===none&&avalon.contains(dom.ownerDocument,dom)&&(value=parseDisplay(dom))):display!==none&&(value=none,vdom.displayValue=display),avalon.applyEffect(dom,vdom,{hook:show?"onEnterDone":"onLeaveDone",cb:cb})}}})},function(module,exports,__webpack_require__){__webpack_require__(45);avalon.directive("expr",{parse:avalon.noop})},function(module,exports,__webpack_require__){var update=__webpack_require__(45);avalon.directive("text",{parse:function(copy,src,binding){copy[binding.name]=1,src.children=[],copy.children='[{\nnodeName:"#text",\ndynamic:true,\nnodeValue:avalon.parsers.string('+avalon.parseExpr(binding)+")}]"},diff:function(copy,src){src.children.length||update(src,this.update)},update:function(dom,vdom){if(dom&&!vdom.isVoidTag){for(var parent=dom;parent.firstChild;)parent.removeChild(parent.firstChild);var dom=document.createTextNode("x");parent.appendChild(dom);var a={nodeType:3,nodeName:"#text",dom:dom};vdom.children.push(a)}}})},function(module,exports,__webpack_require__){var update=__webpack_require__(45);__webpack_require__(53);avalon.directive("html",{parse:function(copy,src,binding){src.isVoidTag?copy.children="[]":(copy[binding.name]=avalon.parseExpr(binding),copy.vmodel="__vmodel__",copy.local="__local__")},diff:function(copy,src,name){var copyValue=copy[name]+"";if(src.dynamic["ms-html"]&&src.render&&copyValue===src[name]){if(src.render){var newTree=src.render(copy.vmodel,copy.local);copy.children=newTree}}else{src[name]=copyValue;var oldTree=avalon.speedUp(avalon.lexer(copyValue)),render=avalon.render(oldTree,copy.local);src.render=render;var newTree=render(copy.vmodel,copy.local);src.children=copy.children=newTree,update(src,this.update)}},update:function(dom,vdom,parent){vdom.dynamic["ms-html"]=1,avalon.clearHTML(dom),dom.appendChild(avalon.domize(vdom.children))}})},function(module,exports){function reconcile(nodes,vnodes,parent){vnodes=flatten(vnodes);var map={},vn=vnodes.length;if(0!==vn){vnodes.forEach(function(el,index){map[index]=getType(el)});for(var el,newNodes=[],change=!1,i=0,breakLoop=0;;){if(el=nodes[i++],breakLoop++>5e3)break;var check,vtype=el&&getType(el),v=newNodes.length;if(map[v]===vtype){if(check&&1===el.nodeType&&(el.getAttribute(":for")||el.getAttribute("ms-for"))){check=!1;continue}newNodes.push(el);var vnode=vnodes[v];if(vnode.dynamic&&(vnode.dom=el),1===el.nodeType&&!vnode.isVoidTag&&!plainTag[vnode.nodeName]){if("select-one"===el.type)var fixIndex=el.selectedIndex;reconcile(el.childNodes,vnode.children,el),"select-one"===el.type&&(el.selectedIndex=fixIndex)}}else if(change=!0,"8true"===map[v]){var vv=vnodes[v],nn=document.createComment(vv.nodeValue);vv.dom=nn,newNodes.push(nn),vv.forExpr&&(check=!0),i=Math.max(0,--i)}if(newNodes.length===vn)break}if(change){for(var f=document.createDocumentFragment(),i=0;el=newNodes[i++];)f.appendChild(el);for(;parent.firstChild;)parent.removeChild(parent.firstChild);parent.appendChild(f)}}}function getType(node){switch(node.nodeType){case 3:return"3"+rwhiteRetain.test(node.nodeValue);case 1:return"1"+node.nodeName.toLowerCase();case 8:return"8"+rforHolder.test(node.nodeValue)}}function flatten(nodes){for(var el,arr=[],i=0;el=nodes[i];i++)Array.isArray(el)?arr=arr.concat(flatten(el)):arr.push(el);return arr}var rforHolder=/^ms\-for/,rwhiteRetain=/[\S\xA0]/,plainTag=avalon.oneObject("script,style,xmp,template,noscript,textarea");module.exports=reconcile},function(module,exports,__webpack_require__){function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i],argType=typeof arg;if("string"===argType||"number"===argType||arg===!0)classes.push(arg);else if(Array.isArray(arg))classes.push(classNames.apply(null,arg));else if("object"===argType)for(var key in arg)arg.hasOwnProperty(key)&&arg[key]&&classes.push(key)}return classes.join(" ")}function activateClass(e){var elem=e.target;avalon(elem).addClass(elem.getAttribute(classMap[e.type])||"")}function abandonClass(e){var elem=e.target,name=classMap[e.type];avalon(elem).removeClass(elem.getAttribute(name)||""),"change-active"!==name&&avalon(elem).removeClass(elem.getAttribute("change-active")||"")}function setClass(dom,vdom){var old=dom.getAttribute("old-change-class"),neo=vdom["ms-class"];old!==neo&&(avalon(dom).removeClass(old).addClass(neo),dom.setAttribute("old-change-class",neo))}var markID=__webpack_require__(6).getLongID,update=__webpack_require__(45),directives=avalon.directives;avalon.directive("class",{diff:function(copy,src,name){var type=name.slice(3),copyValue=copy[name],srcValue=src[name]||"",classEvent=src.classEvent||{};"hover"===type?(classEvent.mouseenter=activateClass,classEvent.mouseleave=abandonClass):"active"===type&&(src.props.tabindex=copy.props.tabindex||-1,classEvent.tabIndex=src.props.tabindex,classEvent.mousedown=activateClass,classEvent.mouseup=abandonClass,classEvent.mouseleave=abandonClass),src.classEvent=classEvent;var className=classNames(copyValue);src.dynamic[name]&&srcValue===className||(src[name]=className,src["change-"+type]=className,update(src,this.update,type))},update:function(dom,vdom){if(dom&&1===dom.nodeType){var classEvent=vdom.classEvent;if(classEvent){for(var i in classEvent)"tabIndex"===i?dom[i]=classEvent[i]:avalon.bind(dom,i,classEvent[i]);vdom.classEvent={}}var names=["class","hover","active"];names.forEach(function(type){var name="change-"+type,value=vdom[name];if(void 0!==value)if(vdom.dynamic["ms-"+type]=1,"class"===type)dom&&setClass(dom,vdom);else{var oldType=dom.getAttribute("change-"+type);oldType&&avalon(dom).removeClass(oldType),dom.setAttribute(name,value)}})}}}),directives.active=directives.hover=directives.class;var classMap={mouseenter:"change-hover",mouseleave:"change-hover",mousedown:"change-active",mouseup:"change-active"};markID(activateClass),markID(abandonClass)},function(module,exports,__webpack_require__){function diffObj(a,b){for(var i in a)if(a[i]!==b[i])return!0;return!1}var Cache=__webpack_require__(30),update=(new Cache(128),__webpack_require__(45)),rmson=(__webpack_require__(6).getLongID,/^ms\-on\-(\w+)/);avalon.directive("on",{priority:3e3,parse:function(copy,src,binding){var underline=binding.name.replace("ms-on-","e").replace("-","_"),uuid=underline+"_"+binding.expr.replace(/\s/g,"").replace(/[^$a-z]/gi,function(e){return e.charCodeAt(0)}),quoted=avalon.quote(uuid),fn="(function(){\nvar fn610 = "+avalon.parseExpr(binding,"on")+"\nfn610.uuid ="+quoted+";\nreturn fn610})()";copy.vmodel="__vmodel__",copy.local="__local__",copy[binding.name]=fn},diff:function(copy,src,name){var fn=copy[name],uuid=fn.uuid,srcFn=src[name]||{},hasChange=!1;src.dynamic[name]&&srcFn.uuid===uuid||(src[name]=fn,avalon.eventListeners[uuid]=fn,hasChange=!0),diffObj(src.local||{},copy.local)&&(hasChange=!0),hasChange&&(src.local=copy.local,src.vmodel=copy.vmodel,update(src,this.update))},update:function(dom,vdom){if(dom&&!(dom.nodeType>1)){var key,listener;dom._ms_context_=vdom.vmodel,dom._ms_local=vdom.local;for(key in vdom){var match=key.match(rmson);match&&(listener=vdom[key],vdom.dynamic[key]=1,avalon.bind(dom,match[1],listener))}}}})},function(module,exports,__webpack_require__){function parseValue(val){for(var k,i=0;k=this.parsers[i++];){var fn=avalon.parsers[k];fn&&(val=fn.call(this,val))}return val}var update=__webpack_require__(45),evaluatorPool=__webpack_require__(42),stringify=__webpack_require__(40),rchangeFilter=/\|\s*change\b/,rcheckedType=/^(?:checkbox|radio)$/,rdebounceFilter=/\|\s*debounce(?:\(([^)]+)\))?/,updateModelByEvent=__webpack_require__(57),updateModelByValue=__webpack_require__(60),updateModel=__webpack_require__(58),updateView=__webpack_require__(61),addValidateField=__webpack_require__(62),duplexDir="ms-duplex";avalon.directive("duplex",{priority:2e3,parse:function(copy,src,binding){var dtype,expr=binding.expr,etype=src.props.type,parsers=binding.param,isChecked=!1;parsers=parsers?parsers.split("-").map(function(a){return"checked"===a&&(isChecked=!0),a}):[],rcheckedType.test(etype)&&isChecked&&(parsers=[],dtype="radio"),/input|textarea|select/.test(src.nodeName)?dtype||(dtype="select"===src.nodeName?"select":"checkbox"===etype?"checkbox":"radio"===etype?"radio":"input"):"contenteditable"in src.props&&(dtype="contenteditable");var isChanged=!1,debounceTime=0;if("input"===dtype||"contenteditable"===dtype){var isString=!0;if(rchangeFilter.test(expr)&&(isChanged=!0),!isChanged){var match=expr.match(rdebounceFilter);match&&(debounceTime=parseInt(match[1],10)||300)}}var changed=copy.props["data-duplex-changed"],get=avalon.parseExpr(binding,"duplex"),quoted=parsers.map(function(a){return avalon.quote(a)});copy[duplexDir]=stringify({type:dtype,vmodel:"__vmodel__",local:"__local__",debug:avalon.quote(binding.name+"="+binding.expr),isChecked:isChecked,parsers:"["+quoted+"]",isString:!!isString,isChanged:isChanged,debounceTime:debounceTime,get:get,set:evaluatorPool.get("duplex:set:"+expr),callback:changed?avalon.parseExpr(changed,"on"):"avalon.noop"})},diff:function(copy,src){if(src.dynamic[duplexDir])data=src[duplexDir];else{var data=src[duplexDir]=copy[duplexDir];data.parse=parseValue}copy!==src&&(copy[duplexDir]=null);var curValue=data.get(data.vmodel),preValue=data.value;if(data.isString){if(curValue=data.parse(curValue),curValue+="",curValue===preValue)return}else if(Array.isArray(curValue)){var hack=!0;if(curValue+""===data.arrayHack)return}data.value=curValue,hack&&(data.arayHack=curValue+""),update(src,this.update,"afterChange")},update:function(dom,vdom){if(dom&&1===dom.nodeType){vdom.dynamic[duplexDir]=1,dom.__ms_duplex__||(dom.__ms_duplex__=avalon.mix(vdom[duplexDir],{dom:dom}),updateModelByEvent(dom,vdom),addValidateField(dom,vdom));var data=dom.__ms_duplex__;if(data.dom=dom,data.isString&&!avalon.msie&&updateModelByValue===!1&&!dom.valueHijack){dom.valueHijack=updateModel;var intervalID=setInterval(function(){avalon.contains(avalon.root,dom)?dom.valueHijack({type:"poll"}):clearInterval(intervalID)},30)}updateView[data.type].call(data)}}})},function(module,exports,__webpack_require__){function updateModelByEvent(node,vnode){var events={},data=vnode["ms-duplex"];switch(data.update=updateModel,data.type){case"radio":case"checkbox":events.click=updateModel;break;case"select":events.change=updateModel;break;case"contenteditable":data.isChanged?events.blur=updateModel:avalon.modern?(window.webkitURL?events.webkitEditableContentChanged=updateModel:window.MutationEvent&&(events.DOMCharacterDataModified=updateModel),events.input=updateModel):(events.keydown=updateModelKeyDown,events.paste=updateModelDelay,events.cut=updateModelDelay,events.focus=closeComposition,events.blur=openComposition);break;case"input":data.isChanged?events.change=updateModel:(msie&&(events.keyup=updateModelKeyDown),msie<9?(events.propertychange=updateModelHack,events.paste=updateModelDelay,events.cut=updateModelDelay):events.input=updateModel,(!msie||msie>9)&&(events.compositionstart=openComposition,events.compositionend=closeComposition),msie||/\[native code\]/.test(window.Int8Array)||(events.keydown=updateModelKeyDown,events.paste=updateModelDelay,events.cut=updateModelDelay,window.netscape&&(events.DOMAutoComplete=updateModel)))}/password|text/.test(vnode.props.type)&&(events.focus=openCaret,events.blur=closeCaret,data.getCaret=getCaret,data.setCaret=setCaret);for(var name in events)avalon.bind(node,name,events[name])}function updateModelHack(e){"value"===e.propertyName&&updateModel.call(this,e)}function updateModelDelay(e){var elem=this;setTimeout(function(){updateModel.call(elem,e)},0)}function openCaret(){this.caret=!0}function closeCaret(){this.caret=!1}function openComposition(){this.composing=!0}function closeComposition(e){this.composing=!1,updateModelDelay.call(this,e)}function updateModelKeyDown(e){var key=e.keyCode;91===key||15<key&&key<19||37<=key&&key<=40||updateModel.call(this,e)}var updateModel=__webpack_require__(58),markID=__webpack_require__(6).getShortID,msie=avalon.msie,window=avalon.window,document=avalon.document;markID(openCaret),markID(closeCaret),markID(openComposition),markID(closeComposition),markID(updateModel),markID(updateModelHack),markID(updateModelDelay),markID(updateModelKeyDown);var mayBeAsync=function(fn){setTimeout(fn,0)},setCaret=function(target,cursorPosition){var range;target.createTextRange?mayBeAsync(function(){target.focus(),range=target.createTextRange(),range.collapse(!0),range.moveEnd("character",cursorPosition),range.moveStart("character",cursorPosition),range.select()}):(target.focus(),void 0!==target.selectionStart&&target.setSelectionRange(cursorPosition,cursorPosition))},getCaret=function(target){var normalizedValue,range,textInputRange,len,endRange,start=0;return"number"==typeof target.selectionStart&&"number"==typeof target.selectionEnd?start=target.selectionStart:(range=document.selection.createRange(),range&&range.parentElement()==target&&(len=target.value.length,normalizedValue=target.value.replace(/\r\n/g,"\n"),textInputRange=target.createTextRange(),textInputRange.moveToBookmark(range.getBookmark()),endRange=target.createTextRange(),endRange.collapse(!1),textInputRange.compareEndPoints("StartToEnd",endRange)>-1?start=len:(start=-textInputRange.moveStart("character",-len),start+=normalizedValue.slice(0,start).split("\n").length-1))),start};module.exports=updateModelByEvent},function(module,exports,__webpack_require__){function updateModelHandle(event){var elem=this,field=this.__ms_duplex__;if(!elem.composing&&elem.value!==field.value){if(elem.caret)try{var pos=field.getCaret(elem);field.pos=pos}catch(e){avalon.warn("fixCaret error",e)}if(field.debounceTime>4){var timestamp=new Date,left=timestamp-field.time||0;field.time=timestamp,left>=field.debounceTime?updateModelMethods[field.type].call(field):(clearTimeout(field.debounceID),field.debounceID=setTimeout(function(){updateModelMethods[field.type].call(field)},left))}else updateModelMethods[field.type].call(field)}}var updateModelMethods=__webpack_require__(59);module.exports=updateModelHandle},function(module,exports){function callback(data){data.callback&&data.callback.call(data.vmodel,{type:"changed",target:data.dom})}var updateModelMethods={input:function(prop){var data=this;prop=prop||"value";var dom=data.dom,rawValue=dom[prop],parsedValue=data.parse(rawValue);data.value=rawValue,data.set(data.vmodel,parsedValue),callback(data);var pos=data.pos;dom.caret&&data.setCaret(dom,pos)},radio:function(){var data=this;if(data.isChecked){var val=!data.value;data.set(data.vmodel,val),callback(data)}else updateModelMethods.input.call(data),data.value=NaN},checkbox:function(){var data=this,array=data.value;Array.isArray(array)||(avalon.warn("ms-duplex应用于checkbox上要对应一个数组"),array=[array]);var method=data.dom.checked?"ensure":"remove";if(array[method]){var val=data.parse(data.dom.value);array[method](val),callback(data)}},select:function(){var data=this,val=avalon(data.dom).val();val+""!=this.value+""&&(val=Array.isArray(val)?val.map(function(v){return data.parse(v)}):data.parse(val),data.set(data.vmodel,val),callback(data))},contenteditable:function(){updateModelMethods.input.call(this,"innerHTML")}};module.exports=updateModelMethods},function(module,exports){function newSetter(value){setters[this.tagName].call(this,value);var data=this.__ms_duplex__;!this.caret&&data&&data.isString&&data.update.call(this,{type:"setter"})}var valueHijack=!1;try{var setters={},aproto=HTMLInputElement.prototype,bproto=HTMLTextAreaElement.prototype,inputProto=HTMLInputElement.prototype;Object.getOwnPropertyNames(inputProto),setters.INPUT=Object.getOwnPropertyDescriptor(aproto,"value").set,Object.defineProperty(aproto,"value",{set:newSetter}),setters.TEXTAREA=Object.getOwnPropertyDescriptor(bproto,"value").set,Object.defineProperty(bproto,"value",{set:newSetter}),valueHijack=!0}catch(e){}module.exports=valueHijack},function(module,exports){var updateView={input:function(){this.dom.value=this.value},radio:function(){var checked;checked=this.isChecked?!!this.value:this.value+""===this.dom.value;var dom=this.dom;6===avalon.msie?setTimeout(function(){dom.defaultChecked=checked,dom.checked=checked},31):dom.checked=checked},checkbox:function(){for(var checked=!1,dom=this.dom,value=dom.value,i=0;i<this.value.length;i++){var el=this.value[i];el+""===value&&(checked=!0)}dom.checked=checked},select:function(){var a=Array.isArray(this.value)?this.value.map(String):this.value+"";avalon(this.dom).val(a)},contenteditable:function(){this.dom.innerHTML=this.value,this.update.call(this.dom)}};module.exports=updateView},function(module,exports){module.exports=function(node,vnode){var field=node.__ms_duplex__,rules=vnode["ms-rules"];if(rules&&!field.validator)for(;node&&1===node.nodeType;){var validator=node._ms_validator_;if(validator){field.rules=rules,field.validator=validator,avalon.Array.ensure(validator.fields,field)&&validator.addField(field);break}node=node.parentNode}}},function(module,exports,__webpack_require__){function getMessage(){var data=this.data||{};return this.message.replace(rformat,function(_,name){return null==data[name]?"":data[name]})}var update=__webpack_require__(45),dir=avalon.directive("validate",{diff:function(copy,src,name){var validator=copy[name],p=src[name];if(!(p&&p.onError&&p.addField)&&Object(validator)===validator){src.vmValidator=validator,validator.$id&&(validator=validator.$model),src[name]=validator;for(var name in dir.defaults)validator.hasOwnProperty(name)||(validator[name]=dir.defaults[name]);validator.fields=validator.fields||[],update(src,this.update)}},update:function(dom,vdom){function onManual(){dir.validateAll.call(validator,validator.onValidateAll)}var validator=vdom["ms-validate"];dom._ms_validator_=validator,validator.dom=dom;var v=vdom.vmValidator;try{v.onManual=onManual}catch(e){}delete vdom.vmValidator,dom.setAttribute("novalidate","novalidate"),validator.validateAllInSubmit&&avalon.bind(dom,"submit",function(e){e.preventDefault(),onManual()}),"function"==typeof validator.onInit&&validator.onInit.call(dom,{type:"init",target:dom,validator:validator})},validateAll:function(callback){var validator=this,fn="function"==typeof callback?callback:validator.onValidateAll,promise=validator.fields.filter(function(field){var el=field.dom;return el&&!el.disabled&&validator.dom.contains(el)}).map(function(field){return dir.validate(field,!0)}),reasons=[];Promise.all(promise).then(function(array){for(var el,i=0;el=array[i++];)reasons=reasons.concat(el);if(validator.deduplicateInValidateAll){var uniq={};reasons=reasons.filter(function(field){var el=field.dom,uuid=el.uniqueID||(el.uniqueID=setTimeout("1"));return!uniq[uuid]&&(uniq[uuid]=!0,!0)})}fn.call(validator.dom,reasons)})},addField:function(field){var validator=this,node=field.dom;!validator.validateInKeyup||field.isChanged||field.debounceTime||avalon.bind(node,"keyup",function(e){dir.validate(field,0,e)}),validator.validateInBlur&&avalon.bind(node,"blur",function(e){dir.validate(field,0,e)}),validator.resetInFocus&&avalon.bind(node,"focus",function(e){validator.onReset.call(node,e,field)})},validate:function(field,isValidateAll,event){var promises=[],value=field.value,elem=field.dom,validator=field.validator;if(!elem.disabled){for(var ruleName in field.rules){var ruleValue=field.rules[ruleName];if(ruleValue!==!1){var resolve,reject,hook=avalon.validators[ruleName];promises.push(new Promise(function(a,b){resolve=a,reject=b}));var next=function(a){if(field.norequired&&""===value&&(a=!0),a)resolve(!0);else{var reason={element:elem,data:field.data,message:elem.getAttribute("data-"+ruleName+"-message")||elem.getAttribute("data-message")||hook.message,validateRule:ruleName,getMessage:getMessage};resolve(reason)}};field.data={},field.data[ruleName]=ruleValue,hook.get(value,field,next)}}var reasons=[],lastPromise=Promise.all(promises).then(function(array){for(var el,i=0;el=array[i++];)"object"==typeof el&&reasons.push(el);return isValidateAll||(reasons.length?validator.onError.call(elem,reasons,event):validator.onSuccess.call(elem,reasons,event),validator.onComplete.call(elem,reasons,event)),reasons});return lastPromise}}}),rformat=/\\?{{([^{}]+)\}}/gm;dir.defaults={addField:dir.addField,onError:avalon.noop,onSuccess:avalon.noop,onComplete:avalon.noop,onManual:avalon.noop,onReset:avalon.noop,onValidateAll:avalon.noop,validateInBlur:!0,validateInKeyup:!0,validateAllInSubmit:!0,resetInFocus:!0,deduplicateInValidateAll:!1}},function(module,exports){function isRegExp(value){return"regexp"===avalon.type(value)}function isCorrectDate(value){if("string"==typeof value&&value){var arr=value.split("-");if(3===arr.length&&4===arr[0].length){var year=~~arr[0],month=~~arr[1]-1,date=~~arr[2],d=new Date(year,month,date);return d.getFullYear()===year&&d.getMonth()===month&&d.getDate()===date}}return!1}avalon.directive("rules",{diff:function(copy,src,name){var neo=copy[name];if(neo&&"[object Object]"===Object.prototype.toString.call(neo)){src[name]=neo.$model||neo;var field=src.dom&&src.dom.__ms_duplex__;field&&(field.rules=copy[name])}}});var rmail=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/i,rurl=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/;avalon.shadowCopy(avalon.validators,{pattern:{message:"必须匹配{{pattern}}这样的格式",get:function(value,field,next){var elem=field.element,data=field.data;if(!isRegExp(data.pattern)){var h5pattern=elem.getAttribute("pattern");data.pattern=new RegExp("^(?:"+h5pattern+")$")}return next(data.pattern.test(value)),value}},digits:{message:"必须整数",get:function(value,field,next){return next(/^\-?\d+$/.test(value)),value}},number:{message:"必须数字",get:function(value,field,next){return next(isFinite(value)),value}},required:{message:"必须填写",get:function(value,field,next){return next(""!==value),value}},equalto:{message:"密码输入不一致",get:function(value,field,next){var id=String(field.data.equalto),other=avalon(document.getElementById(id)).val()||"";return next(value===other),value}},date:{message:"日期格式不正确",get:function(value,field,next){var data=field.data;return next("regexp"===avalon.type(data.date)?data.date.test(value):isCorrectDate(value)),value}},url:{message:"URL格式不正确",get:function(value,field,next){return next(rurl.test(value)),value}},email:{message:"email格式不正确",get:function(value,field,next){return next(rmail.test(value)),value}},minlength:{message:"最少输入{{minlength}}个字",get:function(value,field,next){var num=parseInt(field.data.minlength,10);return next(value.length>=num),value}},maxlength:{message:"最多输入{{maxlength}}个字",get:function(value,field,next){var num=parseInt(field.data.maxlength,10);return next(value.length<=num),value}},min:{message:"输入值不能小于{{min}}",get:function(value,field,next){var num=parseInt(field.data.min,10);return next(parseFloat(value)>=num),value}},max:{message:"输入值不能大于{{max}}",get:function(value,field,next){var num=parseInt(field.data.max,10);return next(parseFloat(value)<=num),value}},chs:{message:"必须是中文字符",get:function(value,field,next){return next(/^[\u4e00-\u9fa5]+$/.test(value)),value}}})},function(module,exports,__webpack_require__){var update=__webpack_require__(45);avalon.directive("if",{priority:6,diff:function(copy,src,name,copys,sources,index){var cur=!!copy[name];src[name]=cur,update(src,this.update)},update:function(dom,vdom,parent){var show=vdom["ms-if"];if(vdom.dynamic["ms-if"]&&(vdom.dynamic["ms-if"]=vdom.nodeName),show){if("#comment"===vdom.nodeName){vdom.nodeName=vdom.dynamic["ms-if"],delete vdom.nodeValue;var comment=vdom.comment;if(!comment)return;parent=comment.parentNode,parent&&parent.replaceChild(dom,comment),avalon.applyEffect(dom,vdom,{hook:"onEnterDone"})}}else vdom.comment||(vdom.comment=document.createComment("if")),vdom.nodeName="#comment",vdom.nodeValue="if",avalon.applyEffect(dom,vdom,{hook:"onLeaveDone",cb:function(){parent=parent||dom.parentNode,parent&&parent.replaceChild(vdom.comment,dom)}})}})},function(module,exports,__webpack_require__){function getTraceKey(item){var type=typeof item;return item&&"object"===type?item.$hashcode:type+":"+item}function iterator(index,item,vars,fn,k1,k2,repeat,isArray){var key=isArray?getTraceKey(item):index,local={};local[k1]=index,local[k2]=item;for(var k in vars)k in local||(local[k]=vars[k]);fn(index,item,key,local,repeat)}function moveItem(item,first,add){var last=item.split,signature=last.nodeValue,doms=[],cur=last.previousSibling;for(doms.unshift(last);;){if(!cur||cur===first||cur.nodeValue===signature)break;var prev=cur.previousSibling;doms.unshift(cur),cur=prev}return add&&doms.forEach(function(el){item.dom.appendChild(el)}),doms}function fuzzyMatchCache(cache){var key;for(var id in cache){var key=id;break}if(key)return isInCache(cache,key)}function isInCache(cache,id){var c=cache[id];if(c){var arr=c.arr;if(arr){var r=arr.pop();return arr.length||(c.arr=0),r}return delete cache[id],c}}function saveInCache(cache,component){var trackId=component.key;if(cache[trackId]){var c=cache[trackId],arr=c.arr||(c.arr=[]);arr.push(component)}else cache[trackId]=component}var update=__webpack_require__(45),rforAs=/\s+as\s+([$\w]+)/,rident=/^[$a-zA-Z_][$a-zA-Z0-9_]*$/,rinvalid=/^(null|undefined|NaN|window|this|\$index|\$id)$/,rargs=/[$\w]+/g;avalon._each=function(obj,fn,local,vnodes){var repeat=[];vnodes.push(repeat);var arr=(fn+"").slice(0,40).match(rargs);if(arr.shift(),Array.isArray(obj))for(var i=0;i<obj.length;i++)iterator(i,obj[i],local,fn,arr[0],arr[1],repeat,!0);else for(var i in obj)obj.hasOwnProperty(i)&&iterator(i,obj[i],local,fn,arr[0],arr[1],repeat)},avalon.directive("for",{priority:3,parse:function(copy,src,binding){var aliasAs,str=src.forExpr;str=str.replace(rforAs,function(a,b){return!rident.test(b)||rinvalid.test(b)?avalon.error("alias "+b+" is invalid --- must be a valid JS identifier which is not a reserved name."):aliasAs=b,""});var arr=str.split(" in "),assign="var loop = "+avalon.parseExpr(arr[1])+" \n",alias=aliasAs?"var "+aliasAs+" = loop\n":"",kv=arr[0].match(rargs);1===kv.length&&kv.unshift("$key"),kv.push("traceKey","__local__","vnodes"),src.$append=assign+alias+"avalon._each(loop,function("+kv.join(", ")+"){\n"+(aliasAs?"__local__["+avalon.quote(aliasAs)+"]=loop\n":"")+'vnodes.push({\nnodeName: "#document-fragment",\nindex: arguments[0],\nkey: traceKey,\nchildren: new function(){\n var vnodes = []\n'},diff:function(copy,src,cpList,spList,index){if(avalon.callArray){if(src.list&&src.forExpr.indexOf(avalon.callArray)===-1)return}else if(src.list)return;var i,c,p,srcRepeat=spList[index+1],curRepeat=cpList[index+1],end=spList[index+2],cache=src.cache||{},removes=[];if(srcRepeat.length)if(srcRepeat===curRepeat){curRepeat.forEach(function(c){saveInCache(cache,c)}),src.cache=cache;var noUpdate=!0}else{src.action="update";var newCache={},fuzzy=[];for(i=0;c=curRepeat[i];i++){var p=isInCache(cache,c.key);p?(p.oldIndex=p.index,p.index=c.index,saveInCache(newCache,p)):fuzzy.push(c)}for(var c,i=0;c=fuzzy[i];i++)p=fuzzyMatchCache(cache,c.key),p?(p.oldIndex=p.index,p.index=c.index,p.key=c.key):(p=c,srcRepeat.push(p)),saveInCache(newCache,p);srcRepeat.sort(function(a,b){
return a.index-b.index}),src.cache=newCache;for(var i in cache)p=cache[i],p.action="leave",avalon.Array.remove(srcRepeat,p),removes.push(p),p.arr&&(p.arr.forEach(function(m){m.action="leave",removes.push(m)}),delete p.arr)}else src.action="init",spList[index+1]=curRepeat,curRepeat.forEach(function(c,i){srcRepeat[i]=c,saveInCache(cache,c)}),src.cache=cache;removes.length>1&&removes.sort(function(a,b){return a.index-b.index}),src.removes=removes;var cb=avalon.caches[src.wid],vm=copy.vmodel;return end&&cb&&(end.afterChange=[function(dom){cb.call(vm,{type:"rendered",target:dom,signature:src.signature})}]),noUpdate||(src.list=srcRepeat,update(src,this.update)),!0},update:function(dom,vdom,parent){if("init"===vdom.action){var b=parent;parent=document.createDocumentFragment()}for(var item,before=dom,signature=dom.signature,i=0;item=vdom.removes[i++];)if(item.dom)if(item.num=0,vdom.hasEffect){var nodes=moveItem(item,dom);applyEffects(nodes,item.children,{hook:"onLeaveDone",staggerKey:signature+"leave",cb:function(node){++item.num,item.dom.appendChild(node),item.num===item.children.length&&(delete item.dom,delete item.split,item.children.length=0)}})}else moveItem(item,dom,"add"),delete item.dom,delete item.split;vdom.list.forEach(function(el,i){el.dom||(el.dom=avalon.domize(el));var f=el.dom;if(void 0===el.oldIndex){if(0===i&&"init"===vdom.action?parent.appendChild(f):parent.insertBefore(f,before.nextSibling),vdom.hasEffect){var nodes=avalon.slice(f.childNodes);applyEffects(nodes,el.children,{hook:"onEnterDone",staggerKey:signature+"enter"})}}else if(el.index!==el.oldIndex){var nodes=moveItem(el,dom,"add");parent.insertBefore(el.dom,before.nextSibling),vdom.hasEffect&&applyEffects(nodes,el.children,{hook:"onMoveDone",staggerKey:signature+"move"})}before=el.split}),"init"===vdom.action&&b.insertBefore(parent,dom.nextSibling)}}),avalon.domize=function(a){return avalon.vdomAdaptor(a,"toDOM")};var applyEffects=function(nodes,vnodes,opts){vnodes.forEach(function(el,i){avalon.applyEffect(nodes[i],vnodes[i],opts)})}},function(module,exports,__webpack_require__){function viewChangeHandle(dom,vdom){var is=vdom.props.is,vm=vdom["component-vm:"+is],html="component-html:"+is,preHTML=vdom[html],curHTML=avalon.vdomAdaptor(vdom,"toHTML");preHTML!==curHTML&&(vdom[html]=curHTML,vm.$fire("onViewChange",{type:"viewchange",target:dom,vmodel:vm,is:is}))}function isComponentReady(vnode){var isReady=!0;try{hasUnresolvedComponent(vnode)}catch(e){isReady=!1}return isReady}function hasUnresolvedComponent(vnode){vnode.children.forEach(function(el){if("#comment"===el.nodeName){if("unresolved component placeholder"===el.nodeValue)throw"unresolved"}else el.children&&hasUnresolvedComponent(el)})}var update=__webpack_require__(45),tryInitComponent=__webpack_require__(68);avalon.component=function(name,definition){avalon.components[name]||(avalon.components[name]=definition)},avalon.directive("widget",{priority:4,parse:function(copy,src,binding){src.props.wid=src.props.wid||avalon.makeHashCode("w"),copy[binding.name]=avalon.parseExpr(binding),copy.template=src.template,copy.vmodel="__vmodel__",copy.local="__local__"},define:function(){return avalon.mediatorFactory.apply(this,arguments)},diff:function(copy,src,name,copyList,srcList,index){var a=copy[name];if(Object(a)===a){var is=src.props.is||(/^ms\-/.test(src.nodeName)?src.nodeName:0);is||(a=a.$model||a,Array.isArray(a)&&(a.unshift({}),avalon.mix.apply(0,a),a=a.shift()),is=a.is);var vmName="component-vm:"+is;if(src.props.is=is,src.vmodel=copy.vmodel,!src[vmName]&&!tryInitComponent(src,copy[name],copy.local,copy.template))return src.nodeValue="unresolved component placeholder",copyList[index]=src,void update(src,this.mountComment);var comVm=src[vmName],scope=avalon.scopes[comVm.$id];if(scope&&scope.vmodel){var com=scope.vmodel.$element;if(src.dom!==com){var component=com.vtree[0];return srcList[index]=copyList[index]=component,src.com=com,component.skipContent||(component.skipContent="optimize"),update(src,this.replaceCachedComponent),void update(component,function(){"optimize"===component.skipContent&&(component.skipContent=!0)},"afterChange")}}var render=comVm.$render,tree=render(comVm,copy.local),component=tree[0];component&&isComponentReady(component)?(component.local=copy.local,Array(vmName,"component-html:"+is,"component-ready:"+is,"dom","dynamic").forEach(function(name){component[name]=src[name]}),component.vmodel=comVm,copyList[index]=component,src.comment&&src.nodeValue&&(component.dom=src.comment),src.nodeName!==component.nodeName?(srcList[index]=component,update(component,this.mountComponent)):update(src,this.updateComponent)):(src.nodeValue="unresolved component placeholder",copyList[index]={nodeValue:"unresolved component placeholder",nodeName:"#comment"},update(src,this.mountComment))}else src.props.is===copy.props.is&&update(src,this.updateComponent)},replaceCachedComponent:function(dom,vdom,parent){var com=vdom.com;parent.replaceChild(com,dom),vdom.dom=com,delete vdom.com},mountComment:function(dom,vdom,parent){var comment=document.createComment(vdom.nodeValue);vdom.dom=comment,parent.replaceChild(comment,dom)},updateComponent:function(dom,vdom){var vm=vdom["component-vm:"+vdom.props.is],viewChangeObservers=vm.$events.onViewChange;viewChangeObservers&&viewChangeObservers.length&&update(vdom,viewChangeHandle,"afterChange")},mountComponent:function(dom,vdom,parent){delete vdom.dom;var com=avalon.vdomAdaptor(vdom,"toDOM"),is=vdom.props.is,vm=vdom["component-vm:"+is];vm.$fire("onInit",{type:"init",vmodel:vm,is:is}),parent.replaceChild(com,dom),vdom.dom=vm.$element=com,com.vtree=[vdom],avalon.onComponentDispose(com),vdom["component-ready:"+is]=!0,avalon.scopes[vm.$id]={vmodel:vm,top:vdom.vmodel,local:vdom.local},update(vdom,function(){vm.$fire("onReady",{type:"ready",target:com,vmodel:vm,is:is})},"afterChange"),update(vdom,function(){vdom["component-html:"+is]=avalon.vdomAdaptor(vdom,"toHTML")},"afterChange")}})},function(module,exports,__webpack_require__){function initComponent(src,rawOption,local,template){function sweeper(a,b){skipProps.forEach(function(k){delete a[k],delete b[k]})}var tag=src.nodeName,is=src.props.is;if(!legalTags[tag]&&!isCustomTag(tag))return void avalon.warn(tag+"不合适做组件的标签");var hooks={};if(rawOption){var options=[].concat(rawOption);options.forEach(function(a){a&&"object"==typeof a&&mixinHooks(hooks,a.$model||a,!0)})}else options=[];var definition=avalon.components[is];if(definition){!hooks.$id&&onceWarn&&(avalon.warn("warning!",is,"组件最好在ms-widget配置对象中指定全局不重复的$id以提高性能!\n","若在ms-for循环中可以利用 ($index,el) in @array 中的$index拼写你的$id\n","如 ms-widget=\"{is:'ms-button',$id:'btn'+$index}\""),onceWarn=!1);var define=hooks.define;define=define||avalon.directives.widget.define;var $id=hooks.$id||src.props.wid||"w"+(new Date-0),defaults=avalon.mix(!0,{},definition.defaults);mixinHooks(hooks,defaults,!1);var skipProps=immunity.concat();sweeper.isWidget=!0;var vmodel=define.apply(sweeper,[src.vmodel,defaults].concat(options));if(!avalon.modern)for(var i in vmodel)skipArray[i]||"function"!=typeof vmodel[i]||(vmodel[i]=vmodel[i].bind(vmodel));vmodel.$id=$id,avalon.vmodels[$id]=vmodel;for(var e in componentEvents)hooks[e]&&hooks[e].forEach(function(fn){vmodel.$watch(e,fn)});var shell=avalon.lexer(template),shellRoot=shell[0];shellRoot.children=shellRoot.children||[],shellRoot.props.is=is,shellRoot.props.wid=$id,avalon.speedUp(shell);var render=avalon.render(shell,local),finalTemplate=definition.template.trim();"function"==typeof definition.getTemplate&&(finalTemplate=definition.getTemplate(vmodel,finalTemplate));var vtree=avalon.lexer(finalTemplate);vtree.length>1&&avalon.error("组件必须用一个元素包起来");var soleSlot=definition.soleSlot;replaceSlot(vtree,soleSlot),avalon.speedUp(vtree);var render2=avalon.render(vtree),str=fnTemplate+"",zzzzz=soleSlot?avalon.quote(soleSlot):"null";str=str.replace("XXXXX",stringifyAnonymous(render)).replace("YYYYY",stringifyAnonymous(render2)).replace("ZZZZZ",zzzzz);var begin=str.indexOf("{")+1,end=str.lastIndexOf("}"),lastFn=Function("vm","local",str.slice(begin,end));return vmodel.$render=lastFn,src["component-vm:"+is]=vmodel,vmodel.$render=lastFn}}function stringifyAnonymous(fn){return fn.toString().replace("anonymous","").replace(/\s*\/\*\*\//g,"")}function fnTemplate(){var shell=XXXXX(vm,local),shellRoot=shell[0],vtree=YYYYY(vm,local),component=vtree[0];for(var i in shellRoot)"children"!==i&&"nodeName"!==i&&("props"===i?avalon.mix(component.props,shellRoot.props):component[i]=shellRoot[i]);var soleSlot=ZZZZZ,slots=avalon.collectSlots(shellRoot,soleSlot);return!soleSlot||slots[soleSlot]&&slots[soleSlot].length||(slots[soleSlot]=[{nodeName:"#text",nodeValue:vm[soleSlot],dynamic:!0}]),avalon.insertSlots(vtree,slots),delete component.skipAttrs,delete component.skipContent,vtree}function replaceSlot(vtree,slotName){for(var el,i=0;el=vtree[i];i++)if("slot"===el.nodeName){var name=el.props.name||slotName;vtree.splice(i,1,{nodeName:"#comment",nodeValue:"slot:"+name,dynamic:!0,type:name},{nodeName:"#comment",nodeValue:"slot-end:"}),i++}else el.children&&replaceSlot(el.children,slotName)}function isCustomTag(type){return rcustomTag.test(type)||avalon.components[type]}function mixinHooks(target,option,overwrite){for(var k in option){var v=option[k];componentEvents[k]?k in target?target[k].push(v):target[k]=[option[k]]:overwrite&&(target[k]=v)}}var skipArray=__webpack_require__(69),legalTags={wbr:1,xmp:1,template:1},events="onInit,onReady,onViewChange,onDispose",componentEvents=avalon.oneObject(events),immunity=events.split(",").concat("is","define"),onceWarn=!0;module.exports=initComponent,avalon.insertSlots=function(vtree,slots){for(var el,i=0;el=vtree[i];i++)if("#comment"===el.nodeName&&slots[el.type]){var args=[i+1,0].concat(slots[el.type]);vtree.splice.apply(vtree,args),i+=slots[el.type].length}else el.children&&avalon.insertSlots(el.children,slots)},avalon.collectSlots=function(node,soleSlot){var slots={};return soleSlot?(slots[soleSlot]=node.children,slots.__sole__=soleSlot):node.children.forEach(function(el,i){if(/^\w/.test(el.nodeName)){var name=el.props.slot;name&&(Array.isArray(slots[name])?slots[name].push(el):slots[name]=[el])}else if(el.forExpr&&/slot=['"](\w+)/.test(el.template)){var a=RegExp.$1;slots[a]=node.children.slice(i,i+2)}}),slots};var rcustomTag=/^[a-z]([a-z\d]+\-)+[a-z\d]+$/},function(module,exports){module.exports=avalon.oneObject("$id,$render,$track,$element,$watch,$fire,$events,$model,$skipArray,$accessors,$hashcode,$run,$wait,__proxy__,__data__,__const__")},function(module,exports,__webpack_require__){function diffObj(a,b){for(var i in a)if(a[i]!==b[i])return!0;return!1}function callNextAnimation(){if(!animationQueue.lock){var fn=animationQueue[0];fn&&(callNextAnimation.lock=!0,fn())}}function toMillisecond(str){var ratio=rsecond.test(str)?1e3:1;return parseFloat(str)*ratio}function execHooks(options,name,el){var list=options[name];list=Array.isArray(list)?list:"function"==typeof list?[list]:[],list.forEach(function(fn){fn&&fn(el)})}function createAction(action){var lower=action.toLowerCase();return function(option){var enterAnimateDone,elem=this.el,$el=avalon(elem),staggerTime=isFinite(option.stagger)?1e3*option.stagger:0;if(staggerTime&&option.staggerKey){var stagger=staggerCache.get(option.staggerKey)||staggerCache.put(option.staggerKey,{count:0,items:0});stagger.count++,stagger.items++}var staggerIndex=stagger&&stagger.count||0,animationDone=function(e){var isOk=e!==!1;elem.animating=void 0,enterAnimateDone=!0;var dirWord=isOk?"Done":"Abort";execHooks(option,"on"+action+dirWord,elem),avalon.unbind(elem,support.transitionEndEvent),avalon.unbind(elem,support.animationEndEvent),stagger&&0===--stagger.items&&(stagger.count=0),option.queue&&(animationQueue.lock=!1,animationQueue.shift(),callNextAnimation())};execHooks(option,"onBefore"+action,elem),option[lower]?option[lower](elem,function(ok){animationDone(ok!==!1)}):support.css&&($el.addClass(option[lower+"Class"]),"leave"===lower?$el.removeClass(option.enterClass+" "+option.enterActiveClass):"enter"===lower&&$el.removeClass(option.leaveClass+" "+option.leaveActiveClass),$el.bind(support.transitionEndEvent,animationDone),$el.bind(support.animationEndEvent,animationDone),setTimeout(function(){enterAnimateDone=NaN===avalon.root.offsetWidth,$el.addClass(option[lower+"ActiveClass"]);var computedStyles=window.getComputedStyle(elem),tranDuration=computedStyles[support.transitionDuration],animDuration=computedStyles[support.animationDuration],time=toMillisecond(tranDuration)||toMillisecond(animDuration);0===!time?animationDone(!1):staggerTime||setTimeout(function(){enterAnimateDone||animationDone(!1)},time+130)},17+staggerTime*staggerIndex))}}function getAction(opts){opts.acton||(opts.action=opts.hook.replace(/^on/,"").replace(/Done$/,"").toLowerCase())}var support=__webpack_require__(71),Cache=__webpack_require__(30),update=__webpack_require__(45);avalon.directive("effect",{priority:5,diff:function(copy,src,name){var copyObj=copy[name];if(copyObj=copy.$model||copyObj,"string"==typeof copyObj){var is=copyObj;copyObj={is:is}}else Array.isArray(copyObj)&&(copyObj=avalon.mix.apply({},copyObj));copyObj.action=copyObj.action||"enter",Object(copyObj)===copyObj&&(src.dynamic[name]&&!diffObj(copyObj,src[name]||{})||(src[name]=copyObj,update(src,this.update,"afterChange"))),copy!==src&&delete copy[name]},update:function(dom,vdom,parent,option){if(!dom.animating){dom.animating=!0;var localeOption=vdom["ms-effect"],type=localeOption.is;if(option=option||{},!type)return avalon.warn("need is option");vdom.dynamic["ms-effect"]=1;var effects=avalon.effects;support.css&&!effects[type]&&avalon.effect(type,{});var globalOption=effects[type];if(!globalOption)return avalon.warn(type+" effect is undefined");var action=option.action||localeOption.action,Effect=avalon.Effect;if("function"!=typeof Effect.prototype[action])return avalon.warn(action+" action is undefined");var effect=new Effect(dom),finalOption=avalon.mix(option,globalOption,localeOption);finalOption.queue?(animationQueue.push(function(){effect[action](finalOption)}),callNextAnimation()):setTimeout(function(){effect[action](finalOption)},4)}}});var animationQueue=[];avalon.effects={},avalon.effect=function(name,definition){avalon.effects[name]=definition||{},support.css&&(definition.enterClass||(definition.enterClass=name+"-enter"),definition.enterActiveClass||(definition.enterActiveClass=definition.enterClass+"-active"),definition.leaveClass||(definition.leaveClass=name+"-leave"),definition.leaveActiveClass||(definition.leaveActiveClass=definition.leaveClass+"-active")),definition.action||(definition.action="enter")};var Effect=function(el){this.el=el};avalon.Effect=Effect,Effect.prototype={enter:createAction("Enter"),leave:createAction("Leave"),move:createAction("Move")};var rsecond=/\d+s$/,staggerCache=new Cache(128);avalon.applyEffect=function(node,vnode,opts){var cb=opts.cb,curEffect=vnode["ms-effect"];if(curEffect){var hook=opts.hook,old=curEffect[hook];cb&&(Array.isArray(old)?old.push(cb):old?curEffect[hook]=[old,cb]:curEffect[hook]=[cb]),getAction(opts),node.animate=!0,avalon.directives.effect.update(node,vnode,0,avalon.shadowCopy({},opts))}else cb&&cb()}},function(module,exports){if(avalon.browser){var transitionEndEvent,animationEndEvent,tran,supportTransition=!1,supportAnimation=!1,supportCSS=!1,transitionDuration=avalon.cssName("transition-duration"),animationDuration=avalon.cssName("animation-duration"),checker={TransitionEvent:"transitionend",WebKitTransitionEvent:"webkitTransitionEnd",OTransitionEvent:"oTransitionEnd",otransitionEvent:"otransitionEnd"},window=avalon.window;for(var name in checker){if(window[name]){tran=checker[name];break}try{document.createEvent(name);tran=checker[name];break}catch(e){}}"string"==typeof tran&&(supportTransition=!0,supportCSS=!0,transitionEndEvent=tran),checker={AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"};var ani;for(name in checker)if(window[name]){ani=checker[name];break}"string"==typeof ani&&(supportAnimation=!0,supportCSS=!0,animationEndEvent=ani)}module.exports={transition:supportTransition,animation:supportAnimation,css:supportCSS,transitionEndEvent:transitionEndEvent,animationEndEvent:animationEndEvent,transitionDuration:transitionDuration,animationDuration:animationDuration}},function(module,exports,__webpack_require__){function render(vtree,local){var _body=Array.isArray(vtree)?vdom2body(vtree):vtree,_local=[];if(local)for(var i in local)_local.push("var "+i+" = __local__["+avalon.quote(i)+"]");var body="__local__ = __local__ || {};\n"+_local.join(";\n")+"\n"+_body;try{var fn=Function("__vmodel__","__local__",body)}catch(e){avalon.warn(_body,"render parse error")}return fn}avalon.lexer=__webpack_require__(73),avalon.diff=__webpack_require__(77),avalon.batch=__webpack_require__(78);var vdom2body=__webpack_require__(38);avalon.render=render,module.exports=avalon},function(module,exports,__webpack_require__){function dig(a){var key="??"+number++;return stringPool[key]=a,key}function fill(a){var val=stringPool[a];return val}function lexer(str){stringPool={},str=clearString(str);var stack=[];stack.last=function(){return stack[stack.length-1]};var ret=[],breakIndex=1e5;do{var node=!1;if("<"!==str.charAt(0)){var i=str.indexOf("<");i=i===-1?str.length:i;var nodeValue=str.slice(0,i).replace(rfill,fill);str=str.slice(i),node={nodeName:"#text",nodeValue:nodeValue},rcontent.test(nodeValue)&&collectNodes(node,stack,ret)}if(!node){var i=str.indexOf("<!--");if(0===i){var l=str.indexOf("-->");l===-1&&avalon.error("注释节点没有闭合"+str);var nodeValue=str.slice(4,l).replace(rfill,fill);str=str.slice(l+3),node={nodeName:"#comment",nodeValue:nodeValue},collectNodes(node,stack,ret)}}if(!node){var match=str.match(ropenTag);if(match){var nodeName=match[1].toLowerCase(),isVoidTag=voidTag[nodeName]||"/"===match[3];node={nodeName:nodeName,props:{},children:[],isVoidTag:isVoidTag};var attrs=match[2];if(attrs&&collectProps(attrs,node.props),collectNodes(node,stack,ret),str=str.slice(match[0].length),isVoidTag)node.end=!0;else if(stack.push(node),plainTag[nodeName]){var index=str.indexOf("</"+nodeName+">"),innerHTML=str.slice(0,index).trim();str=str.slice(index),fixPlainTag(node,nodeName,nomalString(innerHTML))}}}if(!node){var match=str.match(rendTag);if(match){var nodeName=match[1].toLowerCase(),last=stack.last();last?last.nodeName!==nodeName&&avalon.error(last.nodeName+"没有闭合"):avalon.error(match[0]+"前面缺少<"+nodeName+">"),node=stack.pop(),node.end=!0,str=str.slice(match[0].length)}}if(!node||0===--breakIndex)break;node.end&&(fixTbodyAndRepeat(node,stack,ret),delete node.end)}while(str.length);return ret}function fixTbodyAndRepeat(node,stack,ret){var nodeName=node.nodeName,props=node.props;"table"===nodeName&&addTbody(node.children);var forExpr=props["ms-for"];if(forExpr){delete props["ms-for"];var p=stack.last(),arr=p?p.children:ret;arr.splice(arr.length-1,1,{nodeName:"#comment",nodeValue:"ms-for:"+forExpr,type:nodeName},node,{nodeName:"#comment",nodeValue:"ms-for-end:",type:nodeName})}}function collectNodes(node,stack,ret){var p=stack.last();p?p.children.push(node):ret.push(node)}function collectProps(attrs,props){attrs.replace(rnowhite,function(prop){var arr=prop.split("="),name=arr[0],value=arr[1]||"";":"===name.charAt(0)&&(name="ms-"+name.slice(1)),value&&0===value.indexOf("??")&&(value=nomalString(value).replace(rlineSp,"").replace(/\"/g,"'").slice(1,-1)),name in props||(props[name]=value)})}function nomalString(str){return avalon.unescapeHTML(str.replace(rfill,fill))}function clearString(str){for(var array=readString(str),i=0,n=array.length;i<n;i++)str=str.replace(array[i],dig);return str}function readString(str){for(var end,s=0,ret=[],i=0,n=str.length;i<n;i++){var c=str.charAt(i);if(end){if("\\"===c){i+=1;continue}c===end&&(ret.push(str.slice(s,i+1)),end=!1)}else"'"===c?(end="'",s=i):'"'===c&&(end='"',s=i)}return ret}var avalon=__webpack_require__(4);__webpack_require__(74);var voidTag=__webpack_require__(37),addTbody=__webpack_require__(75),fixPlainTag=__webpack_require__(76),plainTag=avalon.oneObject("script,style,textarea,xmp,noscript,option,template"),ropenTag=/^<([-A-Za-z0-9_]+)\s*([^>]*?)(\/?)>/,rendTag=/^<\/([^>]+)>/,rcontent=/\S/,rfill=/\?\?\d+/g,rlineSp=/\n\s*/g,rnowhite=/\S+/g,number=1,stringPool={};module.exports=lexer},function(module,exports,__webpack_require__){function hasDirective(node){var nodeName=node.nodeName;switch(nodeName){case"#text":return!!avalon.config.rexpr.test(node.nodeValue)&&(node.dynamic=!0);case"#comment":return!!node.dynamic;case void 0:return!0;default:var props=node.props||{};if("ms-skip"in props)return node.skipContent=!0,!1;var flag=!1;if("input"===nodeName)props.type||(props.type="text");else if("select"===nodeName){var postfix=props.hasOwnProperty("multiple")?"multiple":"one";props.type=nodeName+"-"+postfix}else 0===nodeName.indexOf("ms-")&&(props["ms-widget"]||(props.is=nodeName,props["ms-widget"]='{is:"'+nodeName+'"}'));var childDir=!1;if(props["ms-widget"]){childDir=!0,delDir(props,"html","widget"),delDir(props,"text","widget");var clone=avalon.mix({},node),cprops=avalon.mix({},node.props);delete cprops["ms-widget"],delete clone.isVoidTag,clone.nodeName="cheng",clone.props=cprops,node.template=avalon.vdomAdaptor(clone,"toHTML"),node.isVoidTag||(node.children=[])}props["ms-text"]&&(childDir=!0,delDir(props,"html","text"),node.isVoidTag||(node.children=[])),props["ms-html"]&&(childDir=!0,node.isVoidTag||(node.children=[]));var hasProps=!1;for(var i in props)if(hasProps=!0,0===i.indexOf("ms-")){flag=!0,node.dynamic={};break}if(hasProps&&(node.props=props),node.children){var r=hasDirectives(node.children);if(r)return delete node.skipContent,!0;childDir?delete node.skipContent:node.skipContent=!0}return flag}}function delDir(props,a,b){props["ms-"+a]&&(avalon.warn(a,"指令不能与",b,"指令共存于同一个元素"),delete props["ms-"+a])}function hasEffect(arr){for(var el,i=0;el=arr[i++];)if(el.props&&el.props["ms-effect"])return!0;return!1}var rmsForStart=/^\s*ms\-for\:/,rmsForEnd=/^\s*ms\-for\-end/,vdom2body=__webpack_require__(38);avalon.speedUp=function(array){return hasDirectives(array),array};var hasDirectives=function(arr){for(var nodes=[],hasDir=!1,i=0;i<arr.length;i++){var el=arr[i],isComment="#comment"===el.nodeName;if(isComment&&rmsForStart.test(el.nodeValue)){hasDir=!0,nodes.push(el);var old=nodes;nodes=[],nodes.list=old,nodes.start=el}else if(isComment&&rmsForEnd.test(el.nodeValue)){var old=nodes;nodes=old.list;var start=old.start;delete old.list,delete old.start,nodes.push(old,el),el.dynamic=!0;var uuid=start.signature||(start.signature=avalon.makeHashCode("for"));if(el.signature=uuid,start.forExpr=start.nodeValue.replace(/ms\-for:\s*/,""),1===old.length){var element=old[0];if(element.props){var cb=element.props["data-for-rendered"];if(cb){delete element.props["data-for-rendered"];var wid=cb+":cb";avalon.caches[wid]||(avalon.caches[wid]=Function("return "+avalon.parseExpr(cb,"on"))()),start.wid=wid}}}for(var j=0;j<old.length;j++){var el=old[j],elem=el.dom;elem&&elem.parentNode&&elem.parentNode.removeChild(elem)}start.hasEffect=hasEffect(old),hasDirectives(old),avalon.caches[uuid]||(avalon.caches[uuid]=vdom2body(old,!0)),old.length=0}else hasDirective(el)&&(hasDir=!0),nodes.push(el)}return arr.length=0,arr.push.apply(arr,nodes),hasDir}},function(module,exports){module.exports=function(nodes){for(var tbody,needAddTbody=!1,count=0,start=0,n=nodes.length,i=0;i<n;i++){var node=nodes[i];tbody?"tr"!==node.nodeName&&node.children?tbody=!1:(tbody.children.push(node),count++,nodes[i]=0):"tr"===(node.type||node.nodeName)&&(tbody={nodeName:"tbody",children:[]},tbody.children.push(node),node.type&&delete node.type,needAddTbody=!0,0===start&&(start=i),nodes[i]=tbody)}if(needAddTbody)for(i=start;i<n&&(0!==nodes[i]||(nodes.splice(i,1),i--,count--,0!==count));i++);}},function(module,exports){function fixPlainTag(node,nodeName,innerHTML){switch(nodeName){case"style":case"script":case"noscript":case"template":case"xmp":node.children=[{nodeName:"#text",skipContent:!0,nodeValue:innerHTML}];break;case"textarea":var props=node.props;props.type="textarea",props.value=innerHTML,node.children=[];break;case"option":node.children=[{nodeName:"#text",nodeValue:trimHTML(innerHTML)}]}}function trimHTML(v){return String(v).replace(rtrimHTML,"").trim()}var rtrimHTML=/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi;module.exports=fixPlainTag},function(module,exports){function diff(copys,sources){for(var i=0;i<copys.length;i++){var copy=copys[i],src=sources[i]||copys[i];switch(copy.nodeName){case"#text":if(copy.dynamic){var curValue=copy.nodeValue+"";curValue!==src.nodeValue&&(src.nodeValue=curValue,src.dom&&(src.dom.nodeValue=curValue))}break;case"#comment":copy.forExpr?directives.for.diff(copy,src,copys,sources,i):src.afterChange&&execHooks(src,src.afterChange);break;case void 0:diff(copy,src);break;case"#document-fragment":diff(copy.children,src.children);break;default:if(copy.dynamic){var index=i;copy["ms-widget"]&&(avalon.directives.widget.diff(copy,src,"ms-widget",copys,sources,index),copy=copys[i],src=sources[i]||emptyObj(),delete copy["ms-widget"]),"ms-if"in copy&&(avalon.directives.if.diff(copy,src,"ms-if",copys,sources,index),copy=copys[i],src=sources[i]||emptyObj(),delete copy["ms-if"]),diffProps(copy,src)}!/^\w/.test(copy.nodeName)||copy.skipContent||copy.isVoidTag||diff(copy.children,src.children||[]),src.afterChange&&execHooks(src,src.afterChange)}}}function execHooks(el,hooks){if(hooks.length)for(var hook,i=0;hook=hooks[i++];)hook(el.dom,el);delete el.afterChange}function diffProps(copy,source){var directives=avalon.directives;try{for(var name in copy){var match=name.match(rbinding),type=match&&match[1];directives[type]&&directives[type].diff(copy,source,name)}}catch(e){avalon.warn(type,e,e.stack||e.message,"diffProps error")}}var emptyObj=function(){return{children:[],props:{}}},directives=avalon.directives,rbinding=/^ms-(\w+)-?(.*)/;avalon.diff=diff,avalon.diffProps=diffProps,module.exports=diff},function(module,exports,__webpack_require__){function batchUpdate(id){if(renderingID)return avalon.Array.ensure(needRenderIds,id);renderingID=id;var scope=avalon.scopes[id];if(!scope||!document.nodeName||avalon.suspendUpdate)return renderingID=null;var vm=scope.vmodel,dom=vm.$element,source=dom.vtree||[],renderFn=vm.$render,copy=renderFn(scope.vmodel,scope.local);scope.isTemp&&delete avalon.scopes[id],avalon.diff(copy,source);var index=needRenderIds.indexOf(renderingID);if(renderingID=0,index>-1){var removed=needRenderIds.splice(index,1);return batchUpdate(removed[0])}var more=needRenderIds.shift();more&&batchUpdate(more)}var needRenderIds=(__webpack_require__(53),[]),renderingID=!1;avalon.suspendUpdate=0,module.exports=avalon.batch=batchUpdate},function(module,exports,__webpack_require__){function byMutationEvent(dom){dom.addEventListener("DOMNodeRemovedFromDocument",function(){fireDisposeHookDelay(dom)})}function byRewritePrototype(){function rewite(name,fn){var cb=p[name];p[name]=function(a,b){return fn.call(this,cb,a,b)}}function newSetter(html){var all=avalon.slice(this.getElementsByTagName("*"));oldSetter.call(this,html),fireDisposeHooks(all)}if(!byRewritePrototype.execute){byRewritePrototype.execute=!0;var p=Node.prototype;rewite("removeChild",function(fn,a,b){return fn.call(this,a,b),1===a.nodeType&&fireDisposeHookDelay(a),a}),rewite("replaceChild",function(fn,a,b){return fn.call(this,a,b),1===a.nodeType&&fireDisposeHookDelay(a),a});var oldSetter,ep=Element.prototype;try{var obj=Object.getOwnPropertyDescriptor(ep,"innerHTML"),oldSetter=obj.set;obj.set=newSetter,Object.defineProperty(ep,"innerHTML",obj)}catch(e){ep&&ep.__lookupSetter__&&(oldSetter=ep.__lookupSetter__("innerHTML"),ep.__defineSetter__("innerHTML",newSetter))}rewite("appendChild",function(fn,a){return fn.call(this,a),1===a.nodeType&&11===this.nodeType&&fireDisposeHookDelay(a),a}),rewite("insertBefore",function(fn,a,b){return fn.call(this,a,b),1===a.nodeType&&11===this.nodeType&&fireDisposeHookDelay(a),a})}}function byPolling(dom){avalon.Array.ensure(checkDisposeNodes,dom),checkID||(checkID=setInterval(function(){for(var el,i=0;el=checkDisposeNodes[i];)!1===fireDisposeHook(el)?avalon.Array.removeAt(checkDisposeNodes,i):i++;0==checkDisposeNodes.length&&(clearInterval(checkID),checkID=0)},700))}var ret=__webpack_require__(80),fireDisposeHook=ret.fireDisposeHook,fireDisposeHooks=ret.fireDisposeHooks,fireDisposeHookDelay=ret.fireDisposeHookDelay,checkDisposeNodes=[],checkID=0;module.exports=function(dom){window.chrome&&window.MutationEvent?byMutationEvent(dom):avalon.modern&&"function"==typeof window.Node?byRewritePrototype(dom):byPolling(dom)}},function(module,exports){function inDomTree(el){for(;el;){if(9===el.nodeType)return!0;el=el.parentNode}return!1}function fireDisposeHook(el){if(1===el.nodeType&&el.getAttribute("wid")&&!inDomTree(el)){var wid=el.getAttribute("wid"),docker=avalon.scopes[wid];if(!docker)return;var vm=docker.vmodel;if(docker.vmodel.$fire("onDispose",{type:"dispose",target:el,vmodel:vm}),docker&&!el.getAttribute("cached")){delete docker.vmodel,delete avalon.scopes[wid];var is=el.getAttribute("is"),v=el.vtree;detachEvents(v),v&&(v[0][is+"-mount"]=!1,v[0]["component-ready:"+is]=!1)}return!1}}function detachEvents(arr){for(var i in arr){var el=arr[i];if(rtag.test(el.nodeName)){for(var i in el)0===i.indexOf("ms-on")&&delete el[i];el.children&&detachEvents(el.children)}}}function fireDisposeHookDelay(a){setTimeout(function(){fireDisposeHook(a)},4)}function fireDisposeHooks(nodes){for(var el,i=0;el=nodes[i++];)fireDisposeHook(el)}var rtag=/^\w/;module.exports={fireDisposeHookDelay:fireDisposeHookDelay,fireDisposeHooks:fireDisposeHooks,fireDisposeHook:fireDisposeHook}},function(module,exports,__webpack_require__){function Observer(){}function masterFactory(definition,heirloom,options){var $skipArray={};definition.$skipArray&&($skipArray=avalon.oneObject(definition.$skipArray),delete definition.$skipArray);var keys={};options=options||{},heirloom=heirloom||{};var accessors={},hashcode=makeHashCode("$"),pathname=options.pathname||"";options.id=options.id||hashcode,options.hashcode=options.hashcode||hashcode;var key,sid,spath;for(key in definition)if(!$$skipArray[key]){var val=keys[key]=definition[key];isSkip(key,val,$skipArray)||(sid=options.id+"."+key,spath=pathname?pathname+"."+key:key,accessors[key]=makeAccessor(sid,spath,heirloom))}accessors.$model=modelAccessor;var $vmodel=new Observer;$vmodel=createViewModel($vmodel,accessors,definition);for(key in keys)$vmodel[key]=keys[key],key in $skipArray?delete keys[key]:keys[key]=!0;return initViewModel($vmodel,heirloom,keys,accessors,options),$vmodel}function slaveFactory(before,after,heirloom,options){var keys={},skips={},accessors={};heirloom=heirloom||{};var key,sid,spath,pathname=options.pathname,resue=before.$accessors||{};for(key in after)$$skipArray[key]||(keys[key]=!0,isSkip(key,after[key],empty)?(skips[key]=after[key],delete after[key]):resue[key]?accessors[key]=resue[key]:(sid=options.id+"."+key,spath=pathname?pathname+"."+key:key,accessors[key]=makeAccessor(sid,spath,heirloom)));options.hashcode=before.$hashcode||makeHashCode("$"),accessors.$model=modelAccessor;var $vmodel=new Observer;$vmodel=createViewModel($vmodel,accessors,skips);for(key in skips)$vmodel[key]=skips[key];return initViewModel($vmodel,heirloom,keys,accessors,options),$vmodel}function mediatorFactory(before,after){for(var key,config,configName,keys={},accessors={},unresolve={},heirloom={},arr=avalon.slice(arguments),$skipArray={},isWidget="function"==typeof this&&this.isWidget,i=0;i<arr.length;i++){var obj=arr[i],$accessors=obj.$accessors;for(var key in obj)if(obj.hasOwnProperty(key)){var cur=obj[key];"$skipArray"!==key?isWidget&&arr.indexOf(cur)!==-1?(config=cur,configName=key):(keys[key]=cur,accessors[key]&&avalon.isObject(cur)&&delete accessors[key],$accessors&&$accessors[key]?accessors[key]=$accessors[key]:"function"!=typeof keys[key]&&(unresolve[key]=1)):Array.isArray(cur)&&cur.forEach(function(el){
$skipArray[el]=1})}}"function"==typeof this&&this(keys,unresolve);for(key in unresolve)$$skipArray[key]||accessors[key]||isSkip(key,keys[key],$skipArray)||(accessors[key]=makeAccessor(before.$id,key,heirloom),accessors[key].set(keys[key]));var $vmodel=new Observer;$vmodel=createViewModel($vmodel,accessors,keys);for(key in keys){if(accessors[key]||($vmodel[key]=keys[key]),isWidget&&config&&accessors[key]&&config.hasOwnProperty(key)){var GET=accessors[key].get;GET.$decompose||(GET.$decompose={}),GET.$decompose[configName+"."+key]=$vmodel}key in $$skipArray?delete keys[key]:keys[key]=!0}return initViewModel($vmodel,heirloom,keys,accessors,{id:before.$id,hashcode:makeHashCode("$"),master:!0}),$vmodel}function notifySize(array,size){array.length!==size&&array.notify("length",array.length,size,!0)}var share=__webpack_require__(82),createViewModel=__webpack_require__(86),isSkip=share.isSkip,toJson=share.toJson,$$midway=share.$$midway,$$skipArray=share.$$skipArray,makeAccessor=share.makeAccessor,initViewModel=share.initViewModel,modelAccessor=share.modelAccessor,modelAdaptor=share.modelAdaptor,makeHashCode=avalon.makeHashCode;$$midway.masterFactory=masterFactory;var empty={};$$midway.slaveFactory=slaveFactory,$$midway.mediatorFactory=avalon.mediatorFactory=mediatorFactory;var __array__=share.__array__,ap=Array.prototype,_splice=ap.splice;__array__.removeAll=function(all){var size=this.length;if(Array.isArray(all))for(var i=this.length-1;i>=0;i--)all.indexOf(this[i])!==-1&&_splice.call(this,i,1);else if("function"==typeof all)for(i=this.length-1;i>=0;i--){var el=this[i];all(el,i)&&_splice.call(this,i,1)}else _splice.call(this,0,this.length);avalon.modern||(this.$model=toJson(this)),notifySize(this,size),this.notify()};var __method__=["push","pop","shift","unshift","splice"];__method__.forEach(function(method){var original=ap[method];__array__[method]=function(a,b){var args=[],size=this.length;if("splice"===method&&Object(this[0])===this[0])for(var old=this.slice(a,b),neo=ap.slice.call(arguments,2),args=[a,b],j=0,jn=neo.length;j<jn;j++){var item=old[j];args[j+2]=modelAdaptor(neo[j],item,item&&item.$events||{},{id:this.$id+".*",master:!0})}else for(var i=0,n=arguments.length;i<n;i++)args[i]=modelAdaptor(arguments[i],0,{},{id:this.$id+".*",master:!0});var result=original.apply(this,args);return avalon.modern||(this.$model=toJson(this)),notifySize(this,size),this.notify(),result}}),"sort,reverse".replace(avalon.rword,function(method){__array__[method]=function(){return ap[method].apply(this,arguments),avalon.modern||(this.$model=toJson(this)),this.notify(),this}}),module.exports=avalon},function(module,exports,__webpack_require__){function toJson(val){var xtype=avalon.type(val);if("array"===xtype){for(var array=[],i=0;i<val.length;i++)array[i]=toJson(val[i]);return array}if("object"===xtype){var obj={};for(i in val)if("__proxy__"!==i&&"__data__"!==i&&"__const__"!==i&&val.hasOwnProperty(i)){var value=val[i];obj[i]=value&&value.nodeType?value:toJson(value)}return obj}return val}function hideProperty(host,name,value){canHideProperty?Object.defineProperty(host,name,{value:value,writable:!0,enumerable:!1,configurable:!0}):host[name]=value}function initViewModel($vmodel,heirloom,keys,accessors,options){function hasOwnKey(key){return keys[key]===!0}options.array?avalon.modern?Object.defineProperty($vmodel,"$model",modelAccessor):$vmodel.$model=toJson($vmodel):(hideProperty($vmodel,"$accessors",accessors),hideProperty($vmodel,"hasOwnProperty",hasOwnKey),hideProperty($vmodel,"$track",Object.keys(keys).sort().join(";;"))),hideProperty($vmodel,"$id",options.id),hideProperty($vmodel,"$hashcode",options.hashcode),options.master===!0&&(hideProperty($vmodel,"$run",function(){run.call($vmodel)}),hideProperty($vmodel,"$wait",function(){wait.call($vmodel)}),hideProperty($vmodel,"$element",null),hideProperty($vmodel,"$render",0),initEvents($vmodel,heirloom))}function wait(){this.$events.$$wait$$=!0}function run(){var host=this.$events;if(delete host.$$wait$$,host.$$dirty$$){delete host.$$dirty$$,avalon.rerenderStart=new Date;var id=this.$id,dotIndex=id.indexOf(".");dotIndex>0?avalon.batch(id.slice(0,dotIndex)):avalon.batch(id)}}var share=__webpack_require__(83),canHideProperty=__webpack_require__(85),initEvents=share.initEvents,modelAccessor={get:function(){return toJson(this)},set:avalon.noop,enumerable:!1,configurable:!0};share.$$midway.initViewModel=initViewModel,share.$$midway.hideProperty=hideProperty;var mixin={toJson:toJson,initViewModel:initViewModel,modelAccessor:modelAccessor};for(var i in share)mixin[i]=share[i];module.exports=mixin},function(module,exports,__webpack_require__){function initEvents($vmodel,heirloom){heirloom.__vmodel__=$vmodel;var hide=$$midway.hideProperty;hide($vmodel,"$events",heirloom),hide($vmodel,"$watch",function(){if(2===arguments.length)return $watch.apply($vmodel,arguments);throw"$watch方法参数不对"}),hide($vmodel,"$fire",function(expr,a,b){var list=$vmodel.$events[expr];$emit(list,$vmodel,expr,a,b)})}function isSkip(key,value,skipArray){return"$"===key.charAt(0)||skipArray[key]||rskip.test(avalon.type(value))||value&&value.nodeName&&value.nodeType>0}function modelAdaptor(definition,old,heirloom,options){if(Array.isArray(definition))return $$midway.arrayFactory(definition,old,heirloom,options);if(Object(definition)===definition&&"function"!=typeof definition){if(old&&old.$id){if(++avalon.suspendUpdate,old.$track!==Object.keys(definition).sort().join(";;"))var vm=$$midway.slaveFactory(old,definition,heirloom,options);else vm=old;for(var i in definition)$$skipArray[i]||(vm[i]=definition[i]);return--avalon.suspendUpdate,vm}return vm=$$midway.masterFactory(definition,heirloom,options)}return definition}function makeAccessor(sid,spath,heirloom){function get(){return old}var old=NaN;return get.heirloom=heirloom,{get:get,set:function(val){if(old!==val){var vm=heirloom.__vmodel__;val&&"object"==typeof val&&(val=$$midway.modelAdaptor(val,old,heirloom,{pathname:spath,id:sid}));var older=old;if(old=val,this.$hashcode&&vm){if(vm.$events.$$dirty$$=!0,vm.$events.$$wait$$)return;heirloom!==vm.$events&&(get.heirloom=vm.$events),emitWidget(get.$decompose,spath,val,older),spath.indexOf("*")===-1&&$emit(get.heirloom[spath],vm,spath,val,older),emitArray(sid+"",vm,spath,val,older),emitWildcard(get.heirloom,vm,spath,val,older),vm.$events.$$dirty$$=!1,batchUpdateView(vm.$id)}}},enumerable:!0,configurable:!0}}function batchUpdateView(id){avalon.rerenderStart=new Date;var dotIndex=id.indexOf(".");dotIndex>0?avalon.batch(id.slice(0,dotIndex)):avalon.batch(id)}function emitArray(sid,vm,spath,val,older){if(sid.indexOf(".*.")>0){var arr=sid.match(rtopsub),top=avalon.vmodels[arr[1]];if(top){var path=arr[2];$emit(top.$events[path],vm,spath,val,older)}}}function emitWidget(whole,spath,val,older){if(whole&&whole[spath]){var wvm=whole[spath];if(wvm.$hashcode){var wpath=spath.replace(/^[^.]+\./,"");wpath!==spath&&$emit(wvm.$events[wpath],wvm,wpath,val,older)}else delete whole[spath]}}function emitWildcard(obj,vm,spath,val,older){obj.__fuzzy__&&obj.__fuzzy__.replace(avalon.rword,function(expr){var list=obj[expr],reg=list.reg;return reg&&reg.test(spath)&&$emit(list,vm,spath,val,older),expr})}function define(definition){var $id=definition.$id;if(!$id&&avalon.config.debug&&avalon.warn("vm.$id must be specified"),avalon.vmodels[$id])throw Error("error:["+$id+"] had defined!");var vm=$$midway.masterFactory(definition,{},{pathname:"",id:$id,master:!0});return avalon.vmodels[$id]=vm}function arrayFactory(array,old,heirloom,options){if(old&&old.splice){var args=[0,old.length].concat(array);return++avalon.suspendUpdate,avalon.callArray=options.pathname,old.splice.apply(old,args),--avalon.suspendUpdate,old}for(var i in __array__)array[i]=__array__[i];array.notify=function(a,b,c,d){var vm=heirloom.__vmodel__;if(vm){var path=null===a||void 0===a?options.pathname:options.pathname+"."+a;vm.$fire(path,b,c),d||heirloom.$$wait$$||avalon.suspendUpdate||(avalon.callArray=path,batchUpdateView(vm.$id),delete avalon.callArray)}};var hashcode=avalon.makeHashCode("$");options.array=!0,options.hashcode=hashcode,options.id=options.id||hashcode,$$midway.initViewModel(array,heirloom,{},{},options);for(var j=0,n=array.length;j<n;j++)array[j]=modelAdaptor(array[j],0,{},{id:array.$id+".*",master:!0});return array}var $$midway={},$$skipArray=__webpack_require__(69),dispatch=__webpack_require__(84),$emit=dispatch.$emit,$watch=dispatch.$watch,rskip=/function|window|date|regexp|element/i;$$midway.modelAdaptor=modelAdaptor;var rtopsub=/([^.]+)\.(.+)/;$$midway.arrayFactory=arrayFactory;var __array__={set:function(index,val){if(index>>>0===index&&this[index]!==val){if(index>this.length)throw Error(index+"set方法的第一个参数不能大于原数组长度");this.splice(index,1,val)}},contains:function(el){return this.indexOf(el)!==-1},ensure:function(el){return this.contains(el)||this.push(el),this},pushArray:function(arr){return this.push.apply(this,arr)},remove:function(el){return this.removeAt(this.indexOf(el))},removeAt:function(index){return index>>>0===index?this.splice(index,1):[]},clear:function(){return this.removeAll(),this}};avalon.define=define,module.exports={$$midway:$$midway,$$skipArray:$$skipArray,isSkip:isSkip,__array__:__array__,initEvents:initEvents,makeAccessor:makeAccessor,modelAdaptor:modelAdaptor}},function(module,exports){function adjustVm(vm,expr){var other,toppath=expr.split(".")[0];try{vm.hasOwnProperty(toppath)&&(other=vm.$accessors?vm.$accessors[toppath].get.heirloom.__vmodel__:Object.getOwnPropertyDescriptor(vm,toppath).get.heirloom.__vmodel__)}catch(e){}return other||vm}function toRegExp(expr){var arr=expr.split(".");return new RegExp("^"+arr.map(function(el){return"*"===el?"(?:[^.]+)":el}).join("\\.")+"$","i")}function addFuzzy(add,obj,expr){add&&(obj.__fuzzy__?obj.__fuzzy__.indexOf(","+expr)===-1&&(obj.__fuzzy__+=","+expr):obj.__fuzzy__=expr)}function $watch(expr,callback){var fuzzy=expr.indexOf(".*")>0||"*"===expr,vm=fuzzy?this:$watch.adjust(this,expr),hive=this.$events,list=hive[expr]||(hive[expr]=[]);return fuzzy&&(list.reg=list.reg||toRegExp(expr)),addFuzzy(fuzzy,hive,expr),vm!==this&&addFuzzy(fuzzy,this.$events,expr),avalon.Array.ensure(list,callback),function(){avalon.Array.remove(list,callback)}}function $emit(list,vm,path,a,b,i){if(list&&list.length)try{for(i=i||list.length-1;i>=0;i--){var callback=list[i];callback.call(vm,a,b,path)}}catch(e){i-1>0&&$emit(list,vm,path,a,b,i-1),avalon.log(e,path)}}$watch.adjust=adjustVm,module.exports={$emit:$emit,$watch:$watch,adjustVm:adjustVm}},function(module,exports){var flag=!0;try{Object.defineProperty({},"_",{value:"x"})}catch(e){flag=!1}module.exports=flag},function(module,exports,__webpack_require__){function VBMediator(instance,accessors,name,value){var accessor=accessors[name];return 4!==arguments.length?accessor.get.call(instance):void accessor.set.call(instance,value)}var defineProperty,canHideProperty=__webpack_require__(85),$$skipArray=__webpack_require__(69),defineProperties=Object.defineProperties,expose=new Date-0;if(!canHideProperty&&("__defineGetter__"in avalon&&(defineProperty=function(obj,prop,desc){return"value"in desc&&(obj[prop]=desc.value),"get"in desc&&obj.__defineGetter__(prop,desc.get),"set"in desc&&obj.__defineSetter__(prop,desc.set),obj},defineProperties=function(obj,descs){for(var prop in descs)descs.hasOwnProperty(prop)&&defineProperty(obj,prop,descs[prop]);return obj}),avalon.msie)){var VBClassPool={};window.execScript(["Function parseVB(code)","\tExecuteGlobal(code)","End Function"].join("\n"),"VBScript"),defineProperties=function(name,accessors,properties){var buffer=[];buffer.push("\r\n\tPrivate [__data__], [__proxy__]","\tPublic Default Function [__const__](d"+expose+", p"+expose+")","\t\tSet [__data__] = d"+expose+": set [__proxy__] = p"+expose,"\t\tSet [__const__] = Me","\tEnd Function");var uniq={__proxy__:!0,__data__:!0,__const__:!0};for(name in accessors)uniq[name]=!0,buffer.push("\tPublic Property Let ["+name+"](val"+expose+")",'\t\tCall [__proxy__](Me,[__data__], "'+name+'", val'+expose+")","\tEnd Property","\tPublic Property Set ["+name+"](val"+expose+")",'\t\tCall [__proxy__](Me,[__data__], "'+name+'", val'+expose+")","\tEnd Property","\tPublic Property Get ["+name+"]","\tOn Error Resume Next","\t\tSet["+name+'] = [__proxy__](Me,[__data__],"'+name+'")',"\tIf Err.Number <> 0 Then","\t\t["+name+'] = [__proxy__](Me,[__data__],"'+name+'")',"\tEnd If","\tOn Error Goto 0","\tEnd Property");for(name in properties)uniq[name]!==!0&&(uniq[name]=!0,buffer.push("\tPublic ["+name+"]"));for(name in $$skipArray)uniq[name]!==!0&&(uniq[name]=!0,buffer.push("\tPublic ["+name+"]"));buffer.push("\tPublic [hasOwnProperty]"),buffer.push("End Class");var body=buffer.join("\r\n"),className=VBClassPool[body];className||(className=avalon.makeHashCode("VBClass"),window.parseVB("Class "+className+body),window.parseVB(["Function "+className+"Factory(a, b)","\tDim o","\tSet o = (New "+className+")(a, b)","\tSet "+className+"Factory = o","End Function"].join("\r\n")),VBClassPool[body]=className);var ret=window[className+"Factory"](accessors,VBMediator);return ret}}module.exports=defineProperties}])});